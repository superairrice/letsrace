{% extends 'main.html' %}

{% block content %}

<style>
  #home-loader-overlay {
    position: fixed;
    inset: 0;
    z-index: 100000;
    background: rgba(12, 14, 18, 0.9);
    display: flex;
    align-items: center;
    justify-content: center;
    pointer-events: all;
    opacity: 1;
    transition: opacity 0.25s ease;
  }

  #home-loader-overlay.is-hidden {
    opacity: 0;
  }

  #home-loader-track {
    width: min(420px, 86vw);
    height: 4px;
    background: rgba(255, 255, 255, 0.14);
    overflow: hidden;
    border-radius: 999px;
  }

  #home-loader-box {
    width: min(460px, 90vw);
    padding: 18px 16px;
    border-radius: 12px;
    background: rgba(0, 0, 0, 0.26);
    border: 1px solid rgba(255, 255, 255, 0.12);
    backdrop-filter: blur(2px);
  }

  #home-loader-label {
    font-size: 1.2rem;
    color: var(--color-light-gray);
    margin-bottom: 10px;
    text-align: center;
  }

  #home-loader-bar {
    width: 42%;
    height: 100%;
    background: linear-gradient(90deg, #ff6f3d 0%, #ffd166 100%);
    box-shadow: 0 0 14px rgba(255, 111, 61, 0.55);
    animation: home-loading-bar 1.2s ease-in-out infinite;
  }

  @keyframes home-loading-bar {
    0% {
      transform: translateX(-120%);
    }
    50% {
      transform: translateX(65%);
    }
    100% {
      transform: translateX(220%);
    }
  }

  @media screen and (max-width: 844px) {
    .home-mobile-stack > .container {
      display: flex;
      flex-direction: column;
      gap: 1.2rem;
    }

    .home-mobile-stack > .container > .roomList,
    .home-mobile-stack > .container > .activities {
      width: 100%;
      flex-basis: auto;
      max-width: none;
    }

    /* global style.css의 .activities {display:none}를 홈 화면에서만 override */
    .home-mobile-stack > .container > .activities {
      display: block !important;
      margin-top: 0.6rem;
    }
  }
</style>

<div id="home-loader-overlay" aria-live="polite" aria-label="페이지 로딩 중">
  <div id="home-loader-box">
    <div id="home-loader-label">데이터 불러오는 중...</div>
    <div id="home-loader-track">
      <div id="home-loader-bar"></div>
    </div>
  </div>
</div>

<main class="layout layout--2 home-mobile-stack" style="margin-top: 2px;">
  
  <div class="container">
    <!-- Topics Start -->
    
    <!-- Topics End -->

    <!-- Room List Start -->
    <div class="roomList">
      <!-- <div class="mobile-menu">

        <div class="mobile-menuItems">
          <a class="btn btn--main btn--pill" href="{% url 'award_status_jockey' %}">Jockey</a>
          <a class="btn btn--main btn--pill" href="{% url 'award_status_trainer' %}">Trainer</a>
        </div>

      </div> -->

      {% include 'base/home_left.html' %}
      
    </div>
    <!-- Room List End -->

    <div class="activities">
    <!-- Activities Start -->
      {% include 'base/home_right.html' %}
    </div>

    <!-- Activities End -->
  </div>

    

</main>

<script>
  (function () {
    function hideHomeLoader() {
      var overlay = document.getElementById('home-loader-overlay');
      if (!overlay) return;
      overlay.classList.add('is-hidden');
      window.setTimeout(function () {
        if (overlay && overlay.parentNode) {
          overlay.parentNode.removeChild(overlay);
        }
      }, 260);
    }

    if (document.readyState === 'complete') {
      hideHomeLoader();
      return;
    }

    window.addEventListener('load', hideHomeLoader, { once: true });
  })();
</script>
    
{% endblock %}
