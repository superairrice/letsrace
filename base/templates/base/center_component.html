{% load humanize %}
{% load mathfilters %}


<script>
  $(function () {
    $(".fold-table tr.view").on("click", function () {
      if ($(this).hasClass("open")) {
        $(this).removeClass("open").next(".fold").removeClass("open");
      } else {
        $(".fold-table tr.view").removeClass("open").next(".fold").removeClass("open");
        $(this).addClass("open").next(".fold").addClass("open");
      }
    });
  });

</script>

<script>
  $(document).ready(function () {

    $('ul.tabs li').click(function () {
      var tab_id = $(this).attr('data-tab');

      $('ul.tabs li').removeClass('current');
      $('.tab-content').removeClass('current');

      $(this).addClass('current');
      $("#" + tab_id).addClass('current');
    })

  })
</script>

<div>

  <ul class="tabs">
    <li class="tab-link current" data-tab="tab-1">서울</li>
    <li class="tab-link" data-tab="tab-2">부산</li>
    <li class="tab-link" data-tab="tab-3">세번째 메뉴</li>
  </ul>

  <div id="tab-1" class="tab-content current">

    <table class="fold-table">
      <thead>
        <tr>
          <th rowspan="1" colspan="2" align="center">
            <span class="tooltip">
              <a href="{% url 'print_prediction' %}"
                onclick="window.open(this.href, '_blank', 'width=1000, height=1200, toolbars=no, scrollbars=yes'); return false;">🖨️
              </a>
              <span class="tooltip-text">
                프로그램 예상순위 출력
              </span>
            </span>
          </th>
          <th colspan="12" align="center"><span style="color:var(--color-light-gray); font-weight:600;">프로그램 예상순위 & (결과는 색상)</span></th>
          <th colspan="3" align="center"><span style="color:var(--color-light-gray); font-weight:600;">입상예상 기수</span></th>
          <th rowspan="2" align="center"><span style="color:var(--color-light-gray); font-weight:600;">복승식<br>배당</span></th>
        </tr>

        <tr>
          <th rowspan="1" colspan="2" align="center">경주번호</th>
          <th><span class="visible-small" title="" style="color:var(--color-r1);">1.</span><span class="visible-big" style="color:var(--color-r1);">1.</span></th>
          <th><span class="visible-small" title="" style="color:var(--color-r2);">2.</span><span class="visible-big" style="color:var(--color-r2);">2.</span></th>
          <th><span class="visible-small" title="" style="color:var(--color-r3);">3.</span><span class="visible-big" style="color:var(--color-r3);">3.</span></th>
          <th><span class="visible-small" title="" style="color:var(--color-r4);">4.</span><span class="visible-big" style="color:var(--color-r4);">4.</span></th>
          <th><span class="visible-small" title="" style="color:var(--color-r5);">5.</span><span class="visible-big" style="color:var(--color-r5);">5.</span></th>
          <th><span class="visible-small" title="">6.</span><span class="visible-big">6.</span></th>
          <th><span class="visible-small" title="">7.</span><span class="visible-big">7.</span></th>
          <th><span class="visible-small" title="">8.</span><span class="visible-big">8.</span></th>
          <th><span class="visible-small" title="">9.</span><span class="visible-big">9.</span></th>
          <th><span class="visible-small" title="">10.</span><span class="visible-big">10.</span></th>
          <th><span class="visible-small" title="">11.</span><span class="visible-big">11.</span></th>
          <th><span class="visible-small" title="">12.</span><span class="visible-big">12.</span></th>
          <th><span class="visible-small" title="" style="color:var(--color-r1);">1.</span><span class="visible-big" style="color:var(--color-r1);">1.</span></th>
          <th><span class="visible-small" title="" style="color:var(--color-r2);">2.</span><span class="visible-big" style="color:var(--color-r2);">2.</span></th>
          <th><span class="visible-small" title="" style="color:var(--color-r3);">3.</span><span class="visible-big" style="color:var(--color-r3);">3.</span></th>


        </tr>
      </thead>

      <tbody>
        {% for r in r_results %}
        {% if r.rcity == '서울' %}
        <tr class="view" align="center">
          <td align="center">
            <a href="http://kra.fiveplayer.co.kr/player.php?f={{r.rdate}}/{% if r.rcity == '서울' %}s{%else%}b{%endif%}{{r.rno}}r"
              onclick="window.open(this.href, '_blank', 'width=1024, height=1000, toolbars=no, scrollbars=yes'); return false;">
              <span class="tooltip" style="font-size: 1.3rem; font-weight: 400; z-index: 999;">{% if r.rday == 4 %}📗&nbsp;(금){% elif r.rday == 5 %}📗&nbsp;(토){%else%}📘&nbsp;(일){%endif%}
                <span class="tooltip-text">경주영상 보기</span></span>
            </a>
          </td>

          <td>
            <a href="{% url 'prediction_race' r.rcity r.rdate r.rno 0 'awardee' %}" style="text-align: right;">
              <span style="font-size: 1.4rem; font-weight: 400; color:var(--color-main)">{{r.rno}}ᴿ</span>
            </a>
          </td>

          <td>
            {% if r.r_r01 > 0 %} {# 경주결과가 입력되었을때 #}
                {% if r.r01 == r.r_r01 %}<span style="color:var(--color-r1); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r01 == r.r_r02 %}<span style="color:var(--color-r2); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r01 == r.r_r03 %}<span style="color:var(--color-r3); font-size: 1.3rem;">
                {% elif r.r01 == r.r_r04 %}<span style="color:var(--color-r4); font-size: 1.3rem;">
                {% elif r.r01 == r.r_r05 %}<span style="color:var(--color-r5); font-size: 1.3rem;">
                {% else %}<span style="color:var(--color-gray); font-size: 1.2rem;">
                {% endif %}
                
                {% if r.r01 > 0 %}{{r.r01}}{%elif r.r01 == 0 and r.r_cnt >= 1 %}🫥{%else%}{%endif%}</span>
            {%else%}
              <span style="font-size: 1.4rem; font-weight: 600; color:var(--color-r1)">
                {% if r.r01 > 0 %}{{r.r01}}{%elif r.r01 == 0 and r.r_cnt >= 1 %}🫥{%else%}{%endif%}
              </span>
            {%endif%}
          </td>
          <td>
            {% if r.r_r01 > 0 %} {# 경주결과가 입력되었을때 #}
                {% if r.r02 == r.r_r01 %}<span style="color:var(--color-r1); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r02 == r.r_r02 %}<span style="color:var(--color-r2); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r02 == r.r_r03 %}<span style="color:var(--color-r3); font-size: 1.3rem;">
                {% elif r.r02 == r.r_r04 %}<span style="color:var(--color-r4); font-size: 1.3rem;">
                {% elif r.r02 == r.r_r05 %}<span style="color:var(--color-r5); font-size: 1.3rem;">
                {% else %}<span style="color:var(--color-gray); font-size: 1.2rem;">
                {% endif %}
                
                {% if r.r02 > 0 %}{{r.r02}}{%elif r.r02 == 0 and r.r_cnt >= 2 %}🫥{%else%}{%endif%}</span>
            {%else%}
              <span style="font-size: 1.4rem; font-weight: 600; color:var(--color-r2)">
                {% if r.r02 > 0 %}{{r.r02}}{%elif r.r02 == 0 and r.r_cnt >= 2 %}🫥{%else%}{%endif%}
              </span>
            {%endif%}
          </td>
          <td>
            {% if r.r_r01 > 0 %} {# 경주결과가 입력되었을때 #}
                {% if r.r03 == r.r_r01 %}<span style="color:var(--color-r1); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r03 == r.r_r02 %}<span style="color:var(--color-r2); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r03 == r.r_r03 %}<span style="color:var(--color-r3); font-size: 1.3rem;">
                {% elif r.r03 == r.r_r04 %}<span style="color:var(--color-r4); font-size: 1.3rem;">
                {% elif r.r03 == r.r_r05 %}<span style="color:var(--color-r5); font-size: 1.3rem;">
                {% else %}<span style="color:var(--color-gray); font-size: 1.2rem;">
                {% endif %}
                
                {% if r.r03 > 0 %}{{r.r03}}{%elif r.r03 == 0 and r.r_cnt >= 3 %}🫥{%else%}{%endif%}</span>
            {%else%}
              <span style="font-size: 1.3rem; font-weight: 500; color:var(--color-r3)">
                {% if r.r03 > 0 %}{{r.r03}}{%elif r.r03 == 0 and r.r_cnt >= 3 %}🫥{%else%}{%endif%}
              </span>
            {%endif%}
          </td>
          <td>
            {% if r.r_r01 > 0 %} {# 경주결과가 입력되었을때 #}
                {% if r.r04 == r.r_r01 %}<span style="color:var(--color-r1); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r04 == r.r_r02 %}<span style="color:var(--color-r2); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r04 == r.r_r03 %}<span style="color:var(--color-r3); font-size: 1.3rem;">
                {% elif r.r04 == r.r_r04 %}<span style="color:var(--color-r4); font-size: 1.3rem;">
                {% elif r.r04 == r.r_r05 %}<span style="color:var(--color-r5); font-size: 1.3rem;">
                {% else %}<span style="color:var(--color-gray); font-size: 1.2rem;">
                {% endif %}
                
                {% if r.r04 > 0 %}{{r.r04}}{%elif r.r04 == 0 and r.r_cnt >= 4 %}🫥{%else%}{%endif%}</span>
            {%else%}
              <span style="font-size: 1.3rem; font-weight: 500; color:var(--color-r4)">
                {% if r.r04 > 0 %}{{r.r04}}{%elif r.r04 == 0 and r.r_cnt >= 4 %}🫥{%else%}{%endif%}
              </span>
            {%endif%}
          </td>
          <td>
            {% if r.r_r01 > 0 %} {# 경주결과가 입력되었을때 #}
                {% if r.r05 == r.r_r01 %}<span style="color:var(--color-r1); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r05 == r.r_r02 %}<span style="color:var(--color-r2); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r05 == r.r_r03 %}<span style="color:var(--color-r3); font-size: 1.3rem;">
                {% elif r.r05 == r.r_r04 %}<span style="color:var(--color-r4); font-size: 1.3rem;">
                {% elif r.r05 == r.r_r05 %}<span style="color:var(--color-r5); font-size: 1.3rem;">
                {% else %}<span style="color:var(--color-gray); font-size: 1.2rem;">
                {% endif %}
                
                {% if r.r05 > 0 %}{{r.r05}}{%elif r.r05 == 0 and r.r_cnt >= 5 %}🫥{%else%}{%endif%}</span>
            {%else%}
              <span style="font-size: 1.2rem; font-weight: 500; color:var(--color-r5)">
                {% if r.r05 > 0 %}{{r.r05}}{%elif r.r05 == 0 and r.r_cnt >= 5 %}🫥{%else%}{%endif%}
              </span>
            {%endif%}
          </td>
          <td>
            {% if r.r_r01 > 0 %} {# 경주결과가 입력되었을때 #}
                {% if r.r06 == r.r_r01 %}<span style="color:var(--color-r1); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r06 == r.r_r02 %}<span style="color:var(--color-r2); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r06 == r.r_r03 %}<span style="color:var(--color-r3); font-size: 1.3rem;">
                {% elif r.r06 == r.r_r04 %}<span style="color:var(--color-r4); font-size: 1.3rem;">
                {% elif r.r06 == r.r_r05 %}<span style="color:var(--color-r5); font-size: 1.3rem;">
                {% else %}<span style="color:var(--color-gray); font-size: 1.2rem;">
                {% endif %}
                
                {% if r.r06 > 0 %}{{r.r06}}{%elif r.r06 == 0 and r.r_cnt >= 6 %}🫥{%else%}{%endif%}</span>
            {%else%}
              <span style="font-size: 1.2rem; font-weight: 400; color:var(--color-gray)">
                {% if r.r06 > 0 %}{{r.r06}}{%elif r.r06 == 0 and r.r_cnt >= 6 %}🫥{%else%}{%endif%}
              </span>
            {%endif%}
          </td>
          <td>
            {% if r.r_r01 > 0 %} {# 경주결과가 입력되었을때 #}
                {% if r.r07 == r.r_r01 %}<span style="color:var(--color-r1); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r07 == r.r_r02 %}<span style="color:var(--color-r2); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r07 == r.r_r03 %}<span style="color:var(--color-r3); font-size: 1.3rem;">
                {% elif r.r07 == r.r_r04 %}<span style="color:var(--color-r4); font-size: 1.3rem;">
                {% elif r.r07 == r.r_r05 %}<span style="color:var(--color-r5); font-size: 1.3rem;">
                {% else %}<span style="color:var(--color-gray); font-size: 1.2rem;">
                {% endif %}
                
                {% if r.r07 > 0 %}{{r.r07}}{%elif r.r07 == 0 and r.r_cnt >= 7 %}🫥{%else%}{%endif%}</span>
            {%else%}
              <span style="font-size: 1.2rem; font-weight: 400; color:var(--color-gray)">
                {% if r.r07 > 0 %}{{r.r07}}{%elif r.r07 == 0 and r.r_cnt >= 7 %}🫥{%else%}{%endif%}
              </span>
            {%endif%}
          </td>
          <td>
            {% if r.r_r01 > 0 %} {# 경주결과가 입력되었을때 #}
                {% if r.r08 == r.r_r01 %}<span style="color:var(--color-r1); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r08 == r.r_r02 %}<span style="color:var(--color-r2); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r08 == r.r_r03 %}<span style="color:var(--color-r3); font-size: 1.3rem;">
                {% elif r.r08 == r.r_r04 %}<span style="color:var(--color-r4); font-size: 1.3rem;">
                {% elif r.r08 == r.r_r05 %}<span style="color:var(--color-r5); font-size: 1.3rem;">
                {% else %}<span style="color:var(--color-gray); font-size: 1.2rem;">
                {% endif %}
                
                {% if r.r08 > 0 %}{{r.r08}}{%elif r.r08 == 0 and r.r_cnt >= 8 %}🫥{%else%}{%endif%}</span>
            {%else%}
              <span style="font-size: 1.2rem; font-weight: 400; color:var(--color-gray)">
                {% if r.r08 > 0 %}{{r.r08}}{%elif r.r08 == 0 and r.r_cnt >= 8 %}🫥{%else%}{%endif%}
              </span>
            {%endif%}
          </td>
          <td>
            {% if r.r_r01 > 0 %} {# 경주결과가 입력되었을때 #}
                {% if r.r09 == r.r_r01 %}<span style="color:var(--color-r1); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r09 == r.r_r02 %}<span style="color:var(--color-r2); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r09 == r.r_r03 %}<span style="color:var(--color-r3); font-size: 1.3rem;">
                {% elif r.r09 == r.r_r04 %}<span style="color:var(--color-r4); font-size: 1.3rem;">
                {% elif r.r09 == r.r_r05 %}<span style="color:var(--color-r5); font-size: 1.3rem;">
                {% else %}<span style="color:var(--color-gray); font-size: 1.2rem;">
                {% endif %}
                
                {% if r.r09 > 0 %}{{r.r09}}{%elif r.r09 == 0 and r.r_cnt >= 9 %}🫥{%else%}{%endif%}</span>
            {%else%}
              <span style="font-size: 1.2rem; font-weight: 400; color:var(--color-gray)">
                {% if r.r09 > 0 %}{{r.r09}}{%elif r.r09 == 0 and r.r_cnt >= 9 %}🫥{%else%}{%endif%}
              </span>
            {%endif%}
          </td>
          <td>
            {% if r.r_r01 > 0 %} {# 경주결과가 입력되었을때 #}
                {% if r.r10 == r.r_r01 %}<span style="color:var(--color-r1); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r10 == r.r_r02 %}<span style="color:var(--color-r2); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r10 == r.r_r03 %}<span style="color:var(--color-r3); font-size: 1.3rem;">
                {% elif r.r10 == r.r_r04 %}<span style="color:var(--color-r4); font-size: 1.3rem;">
                {% elif r.r10 == r.r_r05 %}<span style="color:var(--color-r5); font-size: 1.3rem;">
                {% else %}<span style="color:var(--color-gray); font-size: 1.2rem;">
                {% endif %}
                
                {% if r.r10 > 0 %}{{r.r10}}{%elif r.r10 == 0 and r.r_cnt >= 10 %}🫥{%else%}{%endif%}</span>
            {%else%}
              <span style="font-size: 1.2rem; font-weight: 400; color:var(--color-gray)">
                {% if r.r10 > 0 %}{{r.r10}}{%elif r.r10 == 0 and r.r_cnt >= 10 %}🫥{%else%}{%endif%}
              </span>
            {%endif%}
          </td>
          <td>
            {% if r.r_r01 > 0 %} {# 경주결과가 입력되었을때 #}
                {% if r.r11 == r.r_r01 %}<span style="color:var(--color-r1); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r11 == r.r_r02 %}<span style="color:var(--color-r2); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r11 == r.r_r03 %}<span style="color:var(--color-r3); font-size: 1.3rem;">
                {% elif r.r11 == r.r_r04 %}<span style="color:var(--color-r4); font-size: 1.3rem;">
                {% elif r.r11 == r.r_r05 %}<span style="color:var(--color-r5); font-size: 1.3rem;">
                {% else %}<span style="color:var(--color-gray); font-size: 1.2rem;">
                {% endif %}
                
                {% if r.r11 > 0 %}{{r.r11}}{%elif r.r11 == 0 and r.r_cnt >= 11 %}🫥{%else%}{%endif%}</span>
            {%else%}
              <span style="font-size: 1.2rem; font-weight: 400; color:var(--color-gray)">
                {% if r.r11 > 0 %}{{r.r11}}{%elif r.r11 == 0 and r.r_cnt >= 11 %}🫥{%else%}{%endif%}
              </span>
            {%endif%}
          </td>
          <td>
            {% if r.r_r01 > 0 %} {# 경주결과가 입력되었을때 #}
                {% if r.r12 == r.r_r01 %}<span style="color:var(--color-r1); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r12 == r.r_r02 %}<span style="color:var(--color-r2); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r12 == r.r_r03 %}<span style="color:var(--color-r3); font-size: 1.3rem;">
                {% elif r.r12 == r.r_r04 %}<span style="color:var(--color-r4); font-size: 1.3rem;">
                {% elif r.r12 == r.r_r05 %}<span style="color:var(--color-r5); font-size: 1.3rem;">
                {% else %}<span style="color:var(--color-gray); font-size: 1.2rem;">
                {% endif %}
                
                {% if r.r12 > 0 %}{{r.r12}}{%elif r.r12 == 0 and r.r_cnt >= 12 %}🫥{%else%}{%endif%}</span>
            {%else%}
              <span style="font-size: 1.2rem; font-weight: 400; color:var(--color-gray)">
                {% if r.r12 > 0 %}{{r.r12}}{%elif r.r12 == 0 and r.r_cnt >= 12 %}🫥{%else%}{%endif%}
              </span>
            {%endif%}
          </td>

          {#  순위별 기수정보     #}
          <td style="font-size: 1.15rem;">
            {% if r.r_r01 > 0 %} {# 경주결과가 입력되었을때 #}
                {% if r.r01 == r.r_r01 %}<span style="color:var(--color-r1);">
                {% elif r.r01 == r.r_r02 %}<span style="color:var(--color-r2);">
                {% elif r.r01 == r.r_r03 %}<span style="color:var(--color-r3);">
                {% elif r.r01 == r.r_r04 %}<span style="color:var(--color-r4);">
                {% elif r.r01 == r.r_r05 %}<span style="color:var(--color-r5);">
                {% else %}<span style="color:var(--color-gray); ">
                {% endif %}
                
                {% if r.r01 > 0 %}{{r.jockey1|slice:"0:3"}}{%elif r.r01 == 0 and r.r_cnt >= 1 %}🫥{%else%}{%endif%}</span>
            {%else%}
              <span style="font-size: 1.15rem; color:var(--color-r1)">
                {% if r.r01 > 0 %}{{r.jockey1|slice:"0:3"}}{%elif r.r01 == 0 and r.r_cnt >= 1 %}🫥{%else%}{%endif%}
              </span>
            {%endif%}
          </td>
          <td style="font-size: 1.15rem;">
            {% if r.r_r01 > 0 %} {# 경주결과가 입력되었을때 #}
                {% if r.r02 == r.r_r01 %}<span style="color:var(--color-r1);">
                {% elif r.r02 == r.r_r02 %}<span style="color:var(--color-r2);">
                {% elif r.r02 == r.r_r03 %}<span style="color:var(--color-r3);">
                {% elif r.r02 == r.r_r04 %}<span style="color:var(--color-r4);">
                {% elif r.r02 == r.r_r05 %}<span style="color:var(--color-r5);">
                {% else %}<span style="color:var(--color-gray); ">
                {% endif %}
                
                {% if r.r02 > 0 %}{{r.jockey2|slice:"0:3"}}{%elif r.r02 == 0 and r.r_cnt >= 1 %}🫥{%else%}{%endif%}</span>
            {%else%}
              <span style="font-size: 1.15rem; color:var(--color-r2)">
                {% if r.r02 > 0 %}{{r.jockey2|slice:"0:3"}}{%elif r.r02 == 0 and r.r_cnt >= 1 %}🫥{%else%}{%endif%}
              </span>
            {%endif%}
          </td>
          <td style="font-size: 1.15rem;">
            {% if r.r_r01 > 0 %} {# 경주결과가 입력되었을때 #}
                {% if r.r03 == r.r_r01 %}<span style="color:var(--color-r1);">
                {% elif r.r03 == r.r_r02 %}<span style="color:var(--color-r2);">
                {% elif r.r03 == r.r_r03 %}<span style="color:var(--color-r3);">
                {% elif r.r03 == r.r_r04 %}<span style="color:var(--color-r4);">
                {% elif r.r03 == r.r_r05 %}<span style="color:var(--color-r5);">
                {% else %}<span style="color:var(--color-gray); ">
                {% endif %}
                
                {% if r.r03 > 0 %}{{r.jockey3|slice:"0:3"}}{%elif r.r03 == 0 and r.r_cnt >= 1 %}🫥{%else%}{%endif%}</span>
            {%else%}
              <span style="font-size: 1.15rem; color:var(--color-r3)">
                {% if r.r03 > 0 %}{{r.jockey3|slice:"0:3"}}{%elif r.r03 == 0 and r.r_cnt >= 1 %}🫥{%else%}{%endif%}
              </span>
            {%endif%}
          </td>
          
            {% if r.r2alloc == None %}
            <td align="center" style="font-size: 1.3rem;">
              {% if request.user.username == 'admin' %}
              <a href="{% url 'update_popularity' r.rcity r.rdate r.rno %}"
                onclick="window.open(this.href, '_blank', 'width=900, height=800, toolbars=no, scrollbars=yes'); return false;">
                <span class="tooltip" style="font-size: 1.3rem; font-weight: 400;">🔏
                  <span class="tooltip-text" style="text-align: left; width: 100px; z-index: 1;">인기도 & 경주결과(순위) 입력</span></span>
              </a>
              {% else %}
              -
              {% endif %}
            </td>
            {%else%}
            <td align="right" >
              <span class="tooltip" style="font-size: 1.3rem; font-family: Arial; color:var(--color-r5);">{{r.r2alloc|slice:"2:"}}
                  <span class="tooltip-text" style="font-family: Arial; font-size: 1.2rem; text-align: left; width: 130px; z-index: 999;">
                    <table>
                      <thead>
                        <tr>
                          <th style="font-size: 1.2rem;">승식</th>
                          <th style="font-size: 1.2rem;">배당율</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td style="text-align: center; font-size: 1.2rem;">복승</td>
                          <td style="font-family: Arial; font-size: 1.2rem; text-align: right;">{{r.r2alloc|slice:"2:"}}</td>
                        </tr>
                        <tr>
                          <td style="font-size: 1.2rem;">삼복승</td>
                          <td style="font-family: Arial; font-size: 1.2rem; text-align: right;">{{r.r333alloc|slice:"3:"}}</td>
                        </tr>
                        <tr>
                          <td style="font-size: 1.2rem;">삼쌍승</td>
                          <td style="font-family: Arial; font-size: 1.2rem; text-align: right;">{{r.r123alloc|slice:"3:"}}</td>
                        </tr>
 
                      </tbody>
                    </table>
                  </span>
              </span>
            </td>
            {%endif%}

          
        </tr>

        <tr class="fold">
          <td colspan="18">
            <div class="fold-content">
              <table class="small-friendly">
                <thead>
                  <tr>
                    <th><span class="visible-small" title="Current">예상</span><span class="visible-big">예상</span></th>
                    <th><span class="visible-small" title="Customer name">마번</span><span class="visible-big">마번</span></th>
                    <th><span class="visible-small" title="Insurance number">경주마</span><span class="visible-big">경주마</span></th>
                    <th colspan="2"><span class="visible-small" title="Insurance number">부담중량</span><span class="visible-big">부담중량</span></th>
                    <th><span class="visible-small" title="Strategy">기수</span><span class="visible-big">기수</span></th>
                    <th><span class="visible-small" title="Strategy">조교사</span><span class="visible-big">조교사</span></th>
                    <th><span class="visible-small" title="Strategy">S1F</span><span class="visible-big">S1F</span></th>
                    <th><span class="visible-small" title="Strategy">G3F</span><span class="visible-big">G3F</span></th>
                    <th><span class="visible-small" title="Strategy">G2F</span><span class="visible-big">G2F</span></th>
                    <th><span class="visible-small" title="Strategy">G1F</span><span class="visible-big">G1F</span></th>
                    <th><span class="visible-small" title="Strategy">예상</span><span class="visible-big">예상</span></th>
                    
                    <th><span class="visible-small" title="Current">인기도</span><span class="visible-big">인기도</span></th>
                    
                    <th><span class="visible-small" title="Current">결과</span><span class="visible-big">결과</span></th>
                    
                  </tr>
                </thead>
                <tbody>
                  {% for rcity, awardee, rdate, rday, rno, gate, rank, r_rank, horse, remark, j_name, t_name, h_name, r_pop, distance, handycap, cs1f, cg3f, cg2f, cg1f, complex, i_pre in race %}
                  {% if r.rcity == rcity and r.rdate == rdate and r.rno == rno  %}
                  <tr>
                    <td align="center" data-th="예상" style="font-size: 1.2rem;">
                      {% if rank == 98 %}신{%else%}
                        {% if rank == 1 %}
                        <span class="cur" style="color:var(--color-r1); font-weight: 600;">{{rank}}</span>
                        {% elif rank == 2 %}
                        <span class="cur" style="color:var(--color-r2); font-weight: 600;">{{rank}}</span>
                        {% elif rank == 3 %}
                        <span class="cur" style="color:var(--color-r3); font-weight: 600;">{{rank}}</span>
                        {% elif rank == 4 %}
                        <span class="cur" style="color:var(--color-r4); font-weight: 600;">{{rank}}</span>
                        {% elif rank == 5 %}
                        <span class="cur" style="color:var(--color-r5); font-weight: 600;">{{rank}}</span>
                        {% else %}
                        <span class="cur">{{rank}}</span>
                        {%endif%}
                      {%endif%}
                    </td>
                    <td align="center" data-th="Gate" style="font-size: 1.2rem;">
                      {% if rank == 1 %}
                      <span class="cur" style="color:var(--color-r1); font-weight: 600;">{{gate}}</span>
                      {% elif rank == 2 %}
                      <span class="cur" style="color:var(--color-r2); font-weight: 600;">{{gate}}</span>
                      {% elif rank == 3 %}
                      <span class="cur" style="color:var(--color-r3); font-weight: 600;">{{gate}}</span>
                      {% elif rank == 4 %}
                      <span class="cur" style="color:var(--color-r4); font-weight: 600;">{{gate}}</span>
                      {% elif rank == 5 %}
                      <span class="cur" style="color:var(--color-r5); font-weight: 600;">{{gate}}</span>
                      {% else %}
                      <span class="cur">{{gate}}</span>
                      {%endif%}
                    </td>
                    <td td align="left" data-th="경주마" style="font-size: 1.2rem;">
                      {% if rank == 1 %}
                      <span class="cur" style="color:var(--color-r1); font-weight: 600;">{{horse|slice:"0:4"}}</span>
                      {% elif rank == 2 %}
                      <span class="cur" style="color:var(--color-r2); font-weight: 600;">{{horse|slice:"0:4"}}</span>
                      {% elif rank == 3 %}
                      <span class="cur" style="color:var(--color-r3); font-weight: 600;">{{horse|slice:"0:4"}}</span>
                      {% elif rank == 4 %}
                      <span class="cur" style="color:var(--color-r4); font-weight: 600;">{{horse|slice:"0:4"}}</span>
                      {% elif rank == 5 %}
                      <span class="cur" style="color:var(--color-r5); font-weight: 600;">{{horse|slice:"0:4"}}</span>
                      {% else %}
                      <span class="cur">{{horse|slice:"0:4"}}</span>
                      {%endif%}
                    </td>

                    <td data-th="부중" style="font-size: 1.0rem">{{handycap}}</td>

                    <td data-th="전경주 대비 차" >
                      {% if i_pre > 0 %}
                      <span style="font-size: 1.0rem; color:var(--color-r5);" align="right">+{{i_pre}}</span>
                      {% elif i_pre < 0 %}
                      <span style="font-size: 1.0rem; color:var(--color-r1);" align="right">{{i_pre}}</span>
                      {% else %}
                      <span style="font-size: 1.0rem" align="right">-</span>
                      {% endif %}
                    </td>

                    <td data-th="기수" style="font-size: 1.2rem">{{j_name}}</td>
                    <td data-th="조교사" style="font-size: 1.2rem"><span class="cur">{{t_name}}</span></td>

                    <td data-th="S1F"><span style="font-size: 1.1rem; font-family: Arial">{{cs1f}}</span></td>
                    <td data-th="G3F"><span style="font-size: 1.1rem; font-family: Arial">{{cg3f}}</span></td>
                    <td data-th="G2F"><span style="font-size: 1.1rem; font-family: Arial">{{cg2f}}</span></td>
                    <td data-th="G1F"><span style="font-size: 1.1rem; font-family: Arial">{{cg1f}}</span></td>

                    <td td align="center" data-th="예상기록" style="font-size: 1.15rem;">
                      {% if rank == 1 %}
                      <span style="color:var(--color-r1); font-family: Arial, Helvetica, sans-serif;">{{complex|slice:"0:1"}}&nbsp;{{complex|slice:"1:6"}}</span>
                      {% elif rank == 2 %}
                      <span style="color:var(--color-r2); font-family: Arial, Helvetica, sans-serif;">{{complex|slice:"0:1"}}&nbsp;{{complex|slice:"1:6"}}</span>
                      {% elif rank == 3 %}
                      <span style="color:var(--color-r3); font-family: Arial, Helvetica, sans-serif;">{{complex|slice:"0:1"}}&nbsp;{{complex|slice:"1:6"}}</span>
                      {% elif rank == 4 %}
                      <span style="color:var(--color-r4); font-family: Arial, Helvetica, sans-serif;">{{complex|slice:"0:1"}}&nbsp;{{complex|slice:"1:6"}}</span>
                      {% elif rank == 5 %}
                      <span style="color:var(--color-r5); font-family: Arial, Helvetica, sans-serif;">{{complex|slice:"0:1"}}&nbsp;{{complex|slice:"1:6"}}</span>
                      {% else %}
                      <span style="color:var(--color-gray); font-family: Arial, Helvetica, sans-serif;">{{complex|slice:"0:1"}}&nbsp;{{complex|slice:"1:6"}}</span>
                      {%endif%}
                    </td>

                    <td align="center" data-th="인기도" style="font-size: 1.2rem">
                      <span style="color:blue">
                        <progress value={{r_pop}} max="100" style="width: 3rem"></progress>
                        <!-- {% if r_pop > 80 %}★
                        {% elif r_pop > 60 and r_pop <= 80 %}◎
                        {% elif r_pop > 40 and r_pop <= 60 %}○
                        {% elif r_pop > 20 and r_pop <= 20 %}▲
                        {% elif r_pop > 0 %}※
                        {% else %}−
                        {% endif %} -->
                      </span>
                    </td>

                    <td align="center" data-th="결과" style="font-size: 1.2rem">
                      <a href="http://kra.fiveplayer.co.kr/player.php?f={{rdate}}/{% if rcity == '서울' %}s{%else%}b{% endif %}{{rno}}r"
                        onclick="window.open(this.href, '_blank', 'width=800, height=600, toolbars=no, scrollbars=yes'); return false;">
                      {% if r_rank >= 90 %}-{%else%}
                        {% if r_rank == 1 %}
                        <span class="cur" style="color:var(--color-r1); font-weight: 600;">{{r_rank}}</span>
                        {% elif r_rank == 2 %}
                        <span class="cur" style="color:var(--color-r2); font-weight: 600;">{{r_rank}}</span>
                        {% elif r_rank == 3 %}
                        <span class="cur" style="color:var(--color-r3); font-weight: 600;">{{r_rank}}</span>
                        {% elif r_rank == 4 %}
                        <span class="cur" style="color:var(--color-r4); font-weight: 500;">{{r_rank}}</span>
                        {% elif r_rank == 5 %}
                        <span class="cur" style="color:var(--color-r5); font-weight: 500;">{{r_rank}}</span>
                        {% else %}
                        <span class="cur" style="color:var(--color-gray);">{{r_rank}}</span>
                        {%endif%}
                      {%endif%}
                    </td>
                    
                  </tr>
                  
                  {% endif %}
                  {% endfor %}

                </tbody>
              </table>
            </div>
          </td>
        </tr>
     
        {%endif%}
        {% endfor %}
    
      </tbody>
    </table>

  </div>

  <div id="tab-2" class="tab-content">

    <table class="fold-table">
      <thead>
        <tr>
          <th rowspan="1" colspan="2" align="center">🐳</th>
          <th colspan="12" align="center"><span style="color:var(--color-light-gray); font-weight:600;">프로그램 예상순위 & (결과는 색상)</span></th>
          <th colspan="3" align="center"><span style="color:var(--color-light-gray); font-weight:600;">입상예상 기수</span></th>
          <th rowspan="2" align="center"><span style="color:var(--color-light-gray); font-weight:600;">복승식<br>배당</span></th>
        </tr>

        <tr>
          <th rowspan="1" colspan="2" align="center">경주번호</th>
          <th><span class="visible-small" title="" style="color:var(--color-r1);">1.</span><span class="visible-big" style="color:var(--color-r1);">1.</span></th>
          <th><span class="visible-small" title="" style="color:var(--color-r2);">2.</span><span class="visible-big" style="color:var(--color-r2);">2.</span></th>
          <th><span class="visible-small" title="" style="color:var(--color-r3);">3.</span><span class="visible-big" style="color:var(--color-r3);">3.</span></th>
          <th><span class="visible-small" title="" style="color:var(--color-r4);">4.</span><span class="visible-big" style="color:var(--color-r4);">4.</span></th>
          <th><span class="visible-small" title="" style="color:var(--color-r5);">5.</span><span class="visible-big" style="color:var(--color-r5);">5.</span></th>
          <th><span class="visible-small" title="">6.</span><span class="visible-big">6.</span></th>
          <th><span class="visible-small" title="">7.</span><span class="visible-big">7.</span></th>
          <th><span class="visible-small" title="">8.</span><span class="visible-big">8.</span></th>
          <th><span class="visible-small" title="">9.</span><span class="visible-big">9.</span></th>
          <th><span class="visible-small" title="">10.</span><span class="visible-big">10.</span></th>
          <th><span class="visible-small" title="">11.</span><span class="visible-big">11.</span></th>
          <th><span class="visible-small" title="">12.</span><span class="visible-big">12.</span></th>
          <th><span class="visible-small" title="" style="color:var(--color-r1);">1.</span><span class="visible-big" style="color:var(--color-r1);">1.</span></th>
          <th><span class="visible-small" title="" style="color:var(--color-r2);">2.</span><span class="visible-big" style="color:var(--color-r2);">2.</span></th>
          <th><span class="visible-small" title="" style="color:var(--color-r3);">3.</span><span class="visible-big" style="color:var(--color-r3);">3.</span></th>


        </tr>
      </thead>

      <tbody>
        {% for r in r_results %}
        {% if r.rcity == '부산' %}
        <tr class="view" align="center">
          <td align="center">
            <a href="http://kra.fiveplayer.co.kr/player.php?f={{r.rdate}}/{% if r.rcity == '서울' %}s{%else%}b{%endif%}{{r.rno}}r"
              onclick="window.open(this.href, '_blank', 'width=1024, height=1000, toolbars=no, scrollbars=yes'); return false;">
              <span class="tooltip" style="font-size: 1.3rem; font-weight: 400;">{% if r.rday == 4 %}📗&nbsp;(금){% elif r.rday == 5 %}📗&nbsp;(토){%else%}📘&nbsp;(일){%endif%}
                <span class="tooltip-text">경주영상 보기</span></span>
            </a>
          </td>

          <td>
            <a href="{% url 'prediction_race' r.rcity r.rdate r.rno 0 'awardee' %}" style="text-align: right;">
              <span style="font-size: 1.4rem; font-weight: 400; color:var(--color-main)">{{r.rno}}ᴿ</span>
            </a>
          </td>

          <td>
            {% if r.r_r01 > 0 %} {# 경주결과가 입력되었을때 #}
                {% if r.r01 == r.r_r01 %}<span style="color:var(--color-r1); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r01 == r.r_r02 %}<span style="color:var(--color-r2); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r01 == r.r_r03 %}<span style="color:var(--color-r3); font-size: 1.3rem;">
                {% elif r.r01 == r.r_r04 %}<span style="color:var(--color-r4); font-size: 1.3rem;">
                {% elif r.r01 == r.r_r05 %}<span style="color:var(--color-r5); font-size: 1.3rem;">
                {% else %}<span style="color:var(--color-gray); font-size: 1.2rem;">
                {% endif %}
                
                {% if r.r01 > 0 %}{{r.r01}}{%elif r.r01 == 0 and r.r_cnt >= 1 %}🫥{%else%}{%endif%}</span>
            {%else%}
              <span style="font-size: 1.4rem; font-weight: 600; color:var(--color-r1)">
                {% if r.r01 > 0 %}{{r.r01}}{%elif r.r01 == 0 and r.r_cnt >= 1 %}🫥{%else%}{%endif%}
              </span>
            {%endif%}
          </td>
          <td>
            {% if r.r_r01 > 0 %} {# 경주결과가 입력되었을때 #}
                {% if r.r02 == r.r_r01 %}<span style="color:var(--color-r1); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r02 == r.r_r02 %}<span style="color:var(--color-r2); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r02 == r.r_r03 %}<span style="color:var(--color-r3); font-size: 1.3rem;">
                {% elif r.r02 == r.r_r04 %}<span style="color:var(--color-r4); font-size: 1.3rem;">
                {% elif r.r02 == r.r_r05 %}<span style="color:var(--color-r5); font-size: 1.3rem;">
                {% else %}<span style="color:var(--color-gray); font-size: 1.2rem;">
                {% endif %}
                
                {% if r.r02 > 0 %}{{r.r02}}{%elif r.r02 == 0 and r.r_cnt >= 2 %}🫥{%else%}{%endif%}</span>
            {%else%}
              <span style="font-size: 1.4rem; font-weight: 600; color:var(--color-r2)">
                {% if r.r02 > 0 %}{{r.r02}}{%elif r.r02 == 0 and r.r_cnt >= 2 %}🫥{%else%}{%endif%}
              </span>
            {%endif%}
          </td>
          <td>
            {% if r.r_r01 > 0 %} {# 경주결과가 입력되었을때 #}
                {% if r.r03 == r.r_r01 %}<span style="color:var(--color-r1); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r03 == r.r_r02 %}<span style="color:var(--color-r2); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r03 == r.r_r03 %}<span style="color:var(--color-r3); font-size: 1.3rem;">
                {% elif r.r03 == r.r_r04 %}<span style="color:var(--color-r4); font-size: 1.3rem;">
                {% elif r.r03 == r.r_r05 %}<span style="color:var(--color-r5); font-size: 1.3rem;">
                {% else %}<span style="color:var(--color-gray); font-size: 1.2rem;">
                {% endif %}
                
                {% if r.r03 > 0 %}{{r.r03}}{%elif r.r03 == 0 and r.r_cnt >= 3 %}🫥{%else%}{%endif%}</span>
            {%else%}
              <span style="font-size: 1.3rem; font-weight: 500; color:var(--color-r3)">
                {% if r.r03 > 0 %}{{r.r03}}{%elif r.r03 == 0 and r.r_cnt >= 3 %}🫥{%else%}{%endif%}
              </span>
            {%endif%}
          </td>
          <td>
            {% if r.r_r01 > 0 %} {# 경주결과가 입력되었을때 #}
                {% if r.r04 == r.r_r01 %}<span style="color:var(--color-r1); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r04 == r.r_r02 %}<span style="color:var(--color-r2); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r04 == r.r_r03 %}<span style="color:var(--color-r3); font-size: 1.3rem;">
                {% elif r.r04 == r.r_r04 %}<span style="color:var(--color-r4); font-size: 1.3rem;">
                {% elif r.r04 == r.r_r05 %}<span style="color:var(--color-r5); font-size: 1.3rem;">
                {% else %}<span style="color:var(--color-gray); font-size: 1.2rem;">
                {% endif %}
                
                {% if r.r04 > 0 %}{{r.r04}}{%elif r.r04 == 0 and r.r_cnt >= 4 %}🫥{%else%}{%endif%}</span>
            {%else%}
              <span style="font-size: 1.3rem; font-weight: 500; color:var(--color-r4)">
                {% if r.r04 > 0 %}{{r.r04}}{%elif r.r04 == 0 and r.r_cnt >= 4 %}🫥{%else%}{%endif%}
              </span>
            {%endif%}
          </td>
          <td>
            {% if r.r_r01 > 0 %} {# 경주결과가 입력되었을때 #}
                {% if r.r05 == r.r_r01 %}<span style="color:var(--color-r1); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r05 == r.r_r02 %}<span style="color:var(--color-r2); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r05 == r.r_r03 %}<span style="color:var(--color-r3); font-size: 1.3rem;">
                {% elif r.r05 == r.r_r04 %}<span style="color:var(--color-r4); font-size: 1.3rem;">
                {% elif r.r05 == r.r_r05 %}<span style="color:var(--color-r5); font-size: 1.3rem;">
                {% else %}<span style="color:var(--color-gray); font-size: 1.2rem;">
                {% endif %}
                
                {% if r.r05 > 0 %}{{r.r05}}{%elif r.r05 == 0 and r.r_cnt >= 5 %}🫥{%else%}{%endif%}</span>
            {%else%}
              <span style="font-size: 1.2rem; font-weight: 500; color:var(--color-r5)">
                {% if r.r05 > 0 %}{{r.r05}}{%elif r.r05 == 0 and r.r_cnt >= 5 %}🫥{%else%}{%endif%}
              </span>
            {%endif%}
          </td>
          <td>
            {% if r.r_r01 > 0 %} {# 경주결과가 입력되었을때 #}
                {% if r.r06 == r.r_r01 %}<span style="color:var(--color-r1); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r06 == r.r_r02 %}<span style="color:var(--color-r2); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r06 == r.r_r03 %}<span style="color:var(--color-r3); font-size: 1.3rem;">
                {% elif r.r06 == r.r_r04 %}<span style="color:var(--color-r4); font-size: 1.3rem;">
                {% elif r.r06 == r.r_r05 %}<span style="color:var(--color-r5); font-size: 1.3rem;">
                {% else %}<span style="color:var(--color-gray); font-size: 1.2rem;">
                {% endif %}
                
                {% if r.r06 > 0 %}{{r.r06}}{%elif r.r06 == 0 and r.r_cnt >= 6 %}🫥{%else%}{%endif%}</span>
            {%else%}
              <span style="font-size: 1.2rem; font-weight: 400; color:var(--color-gray)">
                {% if r.r06 > 0 %}{{r.r06}}{%elif r.r06 == 0 and r.r_cnt >= 6 %}🫥{%else%}{%endif%}
              </span>
            {%endif%}
          </td>
          <td>
            {% if r.r_r01 > 0 %} {# 경주결과가 입력되었을때 #}
                {% if r.r07 == r.r_r01 %}<span style="color:var(--color-r1); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r07 == r.r_r02 %}<span style="color:var(--color-r2); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r07 == r.r_r03 %}<span style="color:var(--color-r3); font-size: 1.3rem;">
                {% elif r.r07 == r.r_r04 %}<span style="color:var(--color-r4); font-size: 1.3rem;">
                {% elif r.r07 == r.r_r05 %}<span style="color:var(--color-r5); font-size: 1.3rem;">
                {% else %}<span style="color:var(--color-gray); font-size: 1.2rem;">
                {% endif %}
                
                {% if r.r07 > 0 %}{{r.r07}}{%elif r.r07 == 0 and r.r_cnt >= 7 %}🫥{%else%}{%endif%}</span>
            {%else%}
              <span style="font-size: 1.2rem; font-weight: 400; color:var(--color-gray)">
                {% if r.r07 > 0 %}{{r.r07}}{%elif r.r07 == 0 and r.r_cnt >= 7 %}🫥{%else%}{%endif%}
              </span>
            {%endif%}
          </td>
          <td>
            {% if r.r_r01 > 0 %} {# 경주결과가 입력되었을때 #}
                {% if r.r08 == r.r_r01 %}<span style="color:var(--color-r1); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r08 == r.r_r02 %}<span style="color:var(--color-r2); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r08 == r.r_r03 %}<span style="color:var(--color-r3); font-size: 1.3rem;">
                {% elif r.r08 == r.r_r04 %}<span style="color:var(--color-r4); font-size: 1.3rem;">
                {% elif r.r08 == r.r_r05 %}<span style="color:var(--color-r5); font-size: 1.3rem;">
                {% else %}<span style="color:var(--color-gray); font-size: 1.2rem;">
                {% endif %}
                
                {% if r.r08 > 0 %}{{r.r08}}{%elif r.r08 == 0 and r.r_cnt >= 8 %}🫥{%else%}{%endif%}</span>
            {%else%}
              <span style="font-size: 1.2rem; font-weight: 400; color:var(--color-gray)">
                {% if r.r08 > 0 %}{{r.r08}}{%elif r.r08 == 0 and r.r_cnt >= 8 %}🫥{%else%}{%endif%}
              </span>
            {%endif%}
          </td>
          <td>
            {% if r.r_r01 > 0 %} {# 경주결과가 입력되었을때 #}
                {% if r.r09 == r.r_r01 %}<span style="color:var(--color-r1); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r09 == r.r_r02 %}<span style="color:var(--color-r2); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r09 == r.r_r03 %}<span style="color:var(--color-r3); font-size: 1.3rem;">
                {% elif r.r09 == r.r_r04 %}<span style="color:var(--color-r4); font-size: 1.3rem;">
                {% elif r.r09 == r.r_r05 %}<span style="color:var(--color-r5); font-size: 1.3rem;">
                {% else %}<span style="color:var(--color-gray); font-size: 1.2rem;">
                {% endif %}
                
                {% if r.r09 > 0 %}{{r.r09}}{%elif r.r09 == 0 and r.r_cnt >= 9 %}🫥{%else%}{%endif%}</span>
            {%else%}
              <span style="font-size: 1.2rem; font-weight: 400; color:var(--color-gray)">
                {% if r.r09 > 0 %}{{r.r09}}{%elif r.r09 == 0 and r.r_cnt >= 9 %}🫥{%else%}{%endif%}
              </span>
            {%endif%}
          </td>
          <td>
            {% if r.r_r01 > 0 %} {# 경주결과가 입력되었을때 #}
                {% if r.r10 == r.r_r01 %}<span style="color:var(--color-r1); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r10 == r.r_r02 %}<span style="color:var(--color-r2); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r10 == r.r_r03 %}<span style="color:var(--color-r3); font-size: 1.3rem;">
                {% elif r.r10 == r.r_r04 %}<span style="color:var(--color-r4); font-size: 1.3rem;">
                {% elif r.r10 == r.r_r05 %}<span style="color:var(--color-r5); font-size: 1.3rem;">
                {% else %}<span style="color:var(--color-gray); font-size: 1.2rem;">
                {% endif %}
                
                {% if r.r10 > 0 %}{{r.r10}}{%elif r.r10 == 0 and r.r_cnt >= 10 %}🫥{%else%}{%endif%}</span>
            {%else%}
              <span style="font-size: 1.2rem; font-weight: 400; color:var(--color-gray)">
                {% if r.r10 > 0 %}{{r.r10}}{%elif r.r10 == 0 and r.r_cnt >= 10 %}🫥{%else%}{%endif%}
              </span>
            {%endif%}
          </td>
          <td>
            {% if r.r_r01 > 0 %} {# 경주결과가 입력되었을때 #}
                {% if r.r11 == r.r_r01 %}<span style="color:var(--color-r1); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r11 == r.r_r02 %}<span style="color:var(--color-r2); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r11 == r.r_r03 %}<span style="color:var(--color-r3); font-size: 1.3rem;">
                {% elif r.r11 == r.r_r04 %}<span style="color:var(--color-r4); font-size: 1.3rem;">
                {% elif r.r11 == r.r_r05 %}<span style="color:var(--color-r5); font-size: 1.3rem;">
                {% else %}<span style="color:var(--color-gray); font-size: 1.2rem;">
                {% endif %}
                
                {% if r.r11 > 0 %}{{r.r11}}{%elif r.r11 == 0 and r.r_cnt >= 11 %}🫥{%else%}{%endif%}</span>
            {%else%}
              <span style="font-size: 1.2rem; font-weight: 400; color:var(--color-gray)">
                {% if r.r11 > 0 %}{{r.r11}}{%elif r.r11 == 0 and r.r_cnt >= 11 %}🫥{%else%}{%endif%}
              </span>
            {%endif%}
          </td>
          <td>
            {% if r.r_r01 > 0 %} {# 경주결과가 입력되었을때 #}
                {% if r.r12 == r.r_r01 %}<span style="color:var(--color-r1); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r12 == r.r_r02 %}<span style="color:var(--color-r2); font-size: 1.4rem; font-weight: 600;">
                {% elif r.r12 == r.r_r03 %}<span style="color:var(--color-r3); font-size: 1.3rem;">
                {% elif r.r12 == r.r_r04 %}<span style="color:var(--color-r4); font-size: 1.3rem;">
                {% elif r.r12 == r.r_r05 %}<span style="color:var(--color-r5); font-size: 1.3rem;">
                {% else %}<span style="color:var(--color-gray); font-size: 1.2rem;">
                {% endif %}
                
                {% if r.r12 > 0 %}{{r.r12}}{%elif r.r12 == 0 and r.r_cnt >= 12 %}🫥{%else%}{%endif%}</span>
            {%else%}
              <span style="font-size: 1.2rem; font-weight: 400; color:var(--color-gray)">
                {% if r.r12 > 0 %}{{r.r12}}{%elif r.r12 == 0 and r.r_cnt >= 12 %}🫥{%else%}{%endif%}
              </span>
            {%endif%}
          </td>

          {#  순위별 기수정보     #}
          <td style="font-size: 1.15rem;">
            {% if r.r_r01 > 0 %} {# 경주결과가 입력되었을때 #}
                {% if r.r01 == r.r_r01 %}<span style="color:var(--color-r1);">
                {% elif r.r01 == r.r_r02 %}<span style="color:var(--color-r2);">
                {% elif r.r01 == r.r_r03 %}<span style="color:var(--color-r3);">
                {% elif r.r01 == r.r_r04 %}<span style="color:var(--color-r4);">
                {% elif r.r01 == r.r_r05 %}<span style="color:var(--color-r5);">
                {% else %}<span style="color:var(--color-gray); ">
                {% endif %}
                
                {% if r.r01 > 0 %}{{r.jockey1|slice:"0:3"}}{%elif r.r01 == 0 and r.r_cnt >= 1 %}🫥{%else%}{%endif%}</span>
            {%else%}
              <span style="font-size: 1.15rem; color:var(--color-r1)">
                {% if r.r01 > 0 %}{{r.jockey1|slice:"0:3"}}{%elif r.r01 == 0 and r.r_cnt >= 1 %}🫥{%else%}{%endif%}
              </span>
            {%endif%}
          </td>
          <td style="font-size: 1.15rem;">
            {% if r.r_r01 > 0 %} {# 경주결과가 입력되었을때 #}
                {% if r.r02 == r.r_r01 %}<span style="color:var(--color-r1);">
                {% elif r.r02 == r.r_r02 %}<span style="color:var(--color-r2);">
                {% elif r.r02 == r.r_r03 %}<span style="color:var(--color-r3);">
                {% elif r.r02 == r.r_r04 %}<span style="color:var(--color-r4);">
                {% elif r.r02 == r.r_r05 %}<span style="color:var(--color-r5);">
                {% else %}<span style="color:var(--color-gray); ">
                {% endif %}
                
                {% if r.r02 > 0 %}{{r.jockey2|slice:"0:3"}}{%elif r.r02 == 0 and r.r_cnt >= 1 %}🫥{%else%}{%endif%}</span>
            {%else%}
              <span style="font-size: 1.15rem; color:var(--color-r2)">
                {% if r.r02 > 0 %}{{r.jockey2|slice:"0:3"}}{%elif r.r02 == 0 and r.r_cnt >= 1 %}🫥{%else%}{%endif%}
              </span>
            {%endif%}
          </td>
          <td style="font-size: 1.15rem;">
            {% if r.r_r01 > 0 %} {# 경주결과가 입력되었을때 #}
                {% if r.r03 == r.r_r01 %}<span style="color:var(--color-r1);">
                {% elif r.r03 == r.r_r02 %}<span style="color:var(--color-r2);">
                {% elif r.r03 == r.r_r03 %}<span style="color:var(--color-r3);">
                {% elif r.r03 == r.r_r04 %}<span style="color:var(--color-r4);">
                {% elif r.r03 == r.r_r05 %}<span style="color:var(--color-r5);">
                {% else %}<span style="color:var(--color-gray); ">
                {% endif %}
                
                {% if r.r03 > 0 %}{{r.jockey3|slice:"0:3"}}{%elif r.r03 == 0 and r.r_cnt >= 1 %}🫥{%else%}{%endif%}</span>
            {%else%}
              <span style="font-size: 1.15rem; color:var(--color-r3)">
                {% if r.r03 > 0 %}{{r.jockey3|slice:"0:3"}}{%elif r.r03 == 0 and r.r_cnt >= 1 %}🫥{%else%}{%endif%}
              </span>
            {%endif%}
          </td>
          
            {% if r.r2alloc == None %}
            <td align="center" style="font-size: 1.3rem;">
              {% if request.user.username == 'admin' %}
              <a href="{% url 'update_popularity' r.rcity r.rdate r.rno %}"
                onclick="window.open(this.href, '_blank', 'width=900, height=800, toolbars=no, scrollbars=yes'); return false;">
                <span class="tooltip" style="font-size: 1.3rem; font-weight: 400;">🔏
                  <span class="tooltip-text" style="text-align: left; width: 100px; z-index: 1;">인기도 & 경주결과(순위) 입력</span></span>
              </a>
              {% else %}
              -
              {% endif %}
            </td>
            {%else%}
            <td align="right" >
              <span class="tooltip" style="font-size: 1.3rem; font-family: Arial; color:var(--color-r5);">{{r.r2alloc|slice:"2:"}}
                <span class="tooltip-text" style="font-family: Arial; font-size: 1.2rem; text-align: left; width: 130px; z-index: 999;">
                  <table>
                    <thead>
                      <tr>
                        <th style="font-size: 1.2rem;">승식</th>
                        <th style="font-size: 1.2rem;">배당율</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td style="text-align: center; font-size: 1.2rem;">복승</td>
                        <td style="font-family: Arial; font-size: 1.2rem; text-align: right;">{{r.r2alloc|slice:"2:"}}</td>
                      </tr>
                      <tr>
                        <td style="font-size: 1.2rem;">삼복승</td>
                        <td style="font-family: Arial; font-size: 1.2rem; text-align: right;">{{r.r333alloc|slice:"3:"}}</td>
                      </tr>
                      <tr>
                        <td style="font-size: 1.2rem;">삼쌍승</td>
                        <td style="font-family: Arial; font-size: 1.2rem; text-align: right;">{{r.r123alloc|slice:"3:"}}</td>
                      </tr>
                    </tbody>
                  </table>
                </span>
              </span>
            </td>
            {%endif%}
        </tr>

        <tr class="fold">
          <td colspan="18">
            <div class="fold-content">
              <table class="small-friendly">
                <thead>
                  <tr>
                    <th><span class="visible-small" title="Current">예상</span><span class="visible-big">예상</span></th>
                    <th><span class="visible-small" title="Customer name">마번</span><span class="visible-big">마번</span></th>
                    <th><span class="visible-small" title="Insurance number">경주마</span><span class="visible-big">경주마</span></th>
                    <th colspan="2"><span class="visible-small" title="Insurance number">부담중량</span><span class="visible-big">부담중량</span></th>
                    <th><span class="visible-small" title="Strategy">기수</span><span class="visible-big">기수</span></th>
                    <th><span class="visible-small" title="Strategy">조교사</span><span class="visible-big">조교사</span></th>
                    <th><span class="visible-small" title="Strategy">S1F</span><span class="visible-big">S1F</span></th>
                    <th><span class="visible-small" title="Strategy">G3F</span><span class="visible-big">G3F</span></th>
                    <th><span class="visible-small" title="Strategy">G2F</span><span class="visible-big">G2F</span></th>
                    <th><span class="visible-small" title="Strategy">G1F</span><span class="visible-big">G1F</span></th>
                    <th><span class="visible-small" title="Strategy">예상</span><span class="visible-big">예상</span></th>
                    
                    <th><span class="visible-small" title="Current">인기도</span><span class="visible-big">인기도</span></th>
                    
                    <th><span class="visible-small" title="Current">결과</span><span class="visible-big">결과</span></th>
                    
                  </tr>
                </thead>
                <tbody>
                  {% for rcity, awardee, rdate, rday, rno, gate, rank, r_rank, horse, remark, j_name, t_name, h_name, r_pop, distance, handycap, cs1f, cg3f, cg2f, cg1f, complex, i_pre in race %}
                  {% if r.rcity == rcity and r.rdate == rdate and r.rno == rno  %}
                  <tr>
                    <td align="center" data-th="예상" style="font-size: 1.2rem;">
                      {% if rank == 98 %}신{%else%}
                        {% if rank == 1 %}
                        <span class="cur" style="color:var(--color-r1); font-weight: 400;">{{rank}}</span>
                        {% elif rank == 2 %}
                        <span class="cur" style="color:var(--color-r2); font-weight: 400;">{{rank}}</span>
                        {% elif rank == 3 %}
                        <span class="cur" style="color:var(--color-r3); font-weight: 400;">{{rank}}</span>
                        {% elif rank == 4 %}
                        <span class="cur" style="color:var(--color-r4); font-weight: 400;">{{rank}}</span>
                        {% elif rank == 5 %}
                        <span class="cur" style="color:var(--color-r5); font-weight: 400;">{{rank}}</span>
                        {% else %}
                        <span class="cur">{{rank}}</span>
                        {%endif%}
                      {%endif%}
                    </td>
                    <td align="center" data-th="Gate" style="font-size: 1.2rem;">
                      {% if rank == 1 %}
                      <span class="cur" style="color:var(--color-r1); font-weight: 400;">{{gate}}</span>
                      {% elif rank == 2 %}
                      <span class="cur" style="color:var(--color-r2); font-weight: 400;">{{gate}}</span>
                      {% elif rank == 3 %}
                      <span class="cur" style="color:var(--color-r3); font-weight: 400;">{{gate}}</span>
                      {% elif rank == 4 %}
                      <span class="cur" style="color:var(--color-r4); font-weight: 400;">{{gate}}</span>
                      {% elif rank == 5 %}
                      <span class="cur" style="color:var(--color-r5); font-weight: 400;">{{gate}}</span>
                      {% else %}
                      <span class="cur">{{gate}}</span>
                      {%endif%}
                    </td>
                    <td td align="left" data-th="경주마" style="font-size: 1.2rem;">
                      {% if rank == 1 %}
                      <span class="cur" style="color:var(--color-r1); font-weight: 400;">{{horse|slice:"0:4"}}</span>
                      {% elif rank == 2 %}
                      <span class="cur" style="color:var(--color-r2); font-weight: 400;">{{horse|slice:"0:4"}}</span>
                      {% elif rank == 3 %}
                      <span class="cur" style="color:var(--color-r3); font-weight: 400;">{{horse|slice:"0:4"}}</span>
                      {% elif rank == 4 %}
                      <span class="cur" style="color:var(--color-r4); font-weight: 400;">{{horse|slice:"0:4"}}</span>
                      {% elif rank == 5 %}
                      <span class="cur" style="color:var(--color-r5); font-weight: 400;">{{horse|slice:"0:4"}}</span>
                      {% else %}
                      <span class="cur">{{horse|slice:"0:4"}}</span>
                      {%endif%}
                    </td>

                    <td data-th="부중" style="font-size: 1.0rem">{{handycap}}</td>

                    <td data-th="전경주 대비 차" >
                      {% if i_pre > 0 %}
                      <span style="font-size: 1.0rem; color:var(--color-r5);" align="right">+{{i_pre}}</span>
                      {% elif i_pre < 0 %}
                      <span style="font-size: 1.0rem; color:var(--color-r1);" align="right">{{i_pre}}</span>
                      {% else %}
                      <span style="font-size: 1.0rem" align="right">-</span>
                      {% endif %}
                    </td>

                    <td data-th="기수" style="font-size: 1.2rem">{{j_name}}</td>
                    <td data-th="조교사" style="font-size: 1.2rem"><span class="cur">{{t_name}}</span></td>

                    <td data-th="S1F"><span style="font-size: 1.1rem; font-family: Arial">{{cs1f}}</span></td>
                    <td data-th="G3F"><span style="font-size: 1.1rem; font-family: Arial">{{cg3f}}</span></td>
                    <td data-th="G2F"><span style="font-size: 1.1rem; font-family: Arial">{{cg2f}}</span></td>
                    <td data-th="G1F"><span style="font-size: 1.1rem; font-family: Arial">{{cg1f}}</span></td>

                    <td td align="center" data-th="예상기록" style="font-size: 1.15rem;">
                      {% if rank == 1 %}
                      <span style="color:var(--color-r1); font-family: Arial, Helvetica, sans-serif;">{{complex|slice:"0:1"}}&nbsp;{{complex|slice:"1:6"}}</span>
                      {% elif rank == 2 %}
                      <span style="color:var(--color-r2); font-family: Arial, Helvetica, sans-serif;">{{complex|slice:"0:1"}}&nbsp;{{complex|slice:"1:6"}}</span>
                      {% elif rank == 3 %}
                      <span style="color:var(--color-r3); font-family: Arial, Helvetica, sans-serif;">{{complex|slice:"0:1"}}&nbsp;{{complex|slice:"1:6"}}</span>
                      {% elif rank == 4 %}
                      <span style="color:var(--color-r4); font-family: Arial, Helvetica, sans-serif;">{{complex|slice:"0:1"}}&nbsp;{{complex|slice:"1:6"}}</span>
                      {% elif rank == 5 %}
                      <span style="color:var(--color-r5); font-family: Arial, Helvetica, sans-serif;">{{complex|slice:"0:1"}}&nbsp;{{complex|slice:"1:6"}}</span>
                      {% else %}
                      <span style="color:var(--color-gray); font-family: Arial, Helvetica, sans-serif;">{{complex|slice:"0:1"}}&nbsp;{{complex|slice:"1:6"}}</span>
                      {%endif%}
                    </td>

                    <td align="center" data-th="인기도" style="font-size: 1.2rem">
                      <span style="color:blue">
                        <progress value={{r_pop}} max="100" style="width: 3rem"></progress>
                        <!-- {% if r_pop > 80 %}★
                        {% elif r_pop > 60 and r_pop <= 80 %}◎
                        {% elif r_pop > 40 and r_pop <= 60 %}○
                        {% elif r_pop > 20 and r_pop <= 20 %}▲
                        {% elif r_pop > 0 %}※
                        {% else %}−
                        {% endif %} -->
                      </span>
                    </td>

                    <td align="center" data-th="결과" style="font-size: 1.2rem">
                      <a href="http://kra.fiveplayer.co.kr/player.php?f={{rdate}}/{% if rcity == '서울' %}s{%else%}b{% endif %}{{rno}}r"
                        onclick="window.open(this.href, '_blank', 'width=800, height=600, toolbars=no, scrollbars=yes'); return false;">
                      {% if r_rank >= 90 %}-{%else%}
                        {% if r_rank == 1 %}
                        <span class="cur" style="color:var(--color-r1); font-weight: 600;">{{r_rank}}</span>
                        {% elif r_rank == 2 %}
                        <span class="cur" style="color:var(--color-r2); font-weight: 600;">{{r_rank}}</span>
                        {% elif r_rank == 3 %}
                        <span class="cur" style="color:var(--color-r3); font-weight: 600;">{{r_rank}}</span>
                        {% elif r_rank == 4 %}
                        <span class="cur" style="color:var(--color-r4); font-weight: 500;">{{r_rank}}</span>
                        {% elif r_rank == 5 %}
                        <span class="cur" style="color:var(--color-r5); font-weight: 500;">{{r_rank}}</span>
                        {% else %}
                        <span class="cur" style="color:var(--color-gray);">{{r_rank}}</span>
                        {%endif%}
                      {%endif%}
                    </td>
                    
                  </tr>
                  
                  {% endif %}
                  {% endfor %}

                </tbody>
              </table>
            </div>
          </td>
        </tr>
     
        {%endif%}
        {% endfor %}
    
      </tbody>
    </table>
  </div>

</div>