{% load static %}
<style>
  .header.header--loggedIn {
    border: none !important;
    box-shadow: none !important;
    background: linear-gradient(180deg, #353a4c 0%, #31364a 100%) !important;
  }

  html[data-theme="light"] .header.header--loggedIn {
    background: linear-gradient(180deg, #f7f9fd 0%, #eef3fa 100%) !important;
  }

  .header.header--loggedIn .room__top {
    background: transparent !important;
  }

  .header.header--loggedIn .container {
    display: flex;
    align-items: center;
    gap: 1rem;
    min-width: 0;
  }

  .header.header--loggedIn .room__top {
    display: flex;
    align-items: center;
    gap: 0.62rem;
    min-width: 0;
  }

  .header.header--loggedIn .room__top:first-of-type {
    flex: 0 0 auto;
  }

  .header.header--loggedIn .room__top:nth-of-type(2) {
    flex: 1 1 auto;
    justify-content: center;
  }

  .header__menu,
  .header__guest-login p,
  .header__guest-signup p,
  #theme-toggle.theme-toggle-btn,
  #theme-toggle .theme-toggle-btn__text {
    font-family: "Pretendard Variable", "Pretendard", "Noto Sans KR", "Apple SD Gothic Neo", "Malgun Gothic", "Segoe UI", sans-serif !important;
    letter-spacing: -0.01em;
  }

  .header__guest-login p {
    font-size: 1.5rem !important;
    font-weight: 650 !important;
    color: #c6d4e9 !important;
  }

  .header__guest-signup p {
    font-size: 1.5rem !important;
    font-weight: 680 !important;
    color: #c0d5ee !important;
  }

  html[data-theme="light"] .header__guest-signup p {
    color: #2c5a83 !important;
  }

  .header__search--compact {
    display: inline-flex;
    align-items: center;
    gap: 0.68rem;
    margin: 0 auto;
  }

  .thethe9-navbar-logo {
    width: 22.4rem !important;
    height: 4rem !important;
    display: flex;
    align-items: center;
    gap: 0 !important;
    flex: 0 0 auto;
    position: relative;
    overflow: hidden;
  }

  .header__logo.thethe9-navbar-logo > .thethe9-navbar-logo__img {
    width: 100% !important;
    height: 100% !important;
    max-width: none !important;
    object-fit: contain;
    display: block;
    position: absolute;
    inset: 0;
  }

  .thethe9-navbar-logo__img--light {
    display: none !important;
  }

  html[data-theme="light"] .thethe9-navbar-logo__img--dark {
    display: none !important;
  }

  html[data-theme="light"] .thethe9-navbar-logo__img--light {
    display: block !important;
  }

  @media (max-width: 980px) {
    .thethe9-navbar-logo {
      width: 18rem !important;
      height: 3.3rem !important;
    }
  }

  @media (max-width: 640px) {
    .thethe9-navbar-logo {
      width: 14.8rem !important;
      height: 2.8rem !important;
    }
  }

  #theme-toggle.theme-toggle-btn {
    min-height: 3.4rem;
    padding: 0.4rem 1.2rem 0.4rem 0.8rem;
    border-radius: 999px;
    border: none;
    background: linear-gradient(180deg, color-mix(in srgb, var(--color-dark) 94%, #fff 6%) 0%, color-mix(in srgb, var(--color-bg) 88%, #fff 12%) 100%);
    display: inline-flex;
    align-items: center;
    gap: 0.7rem;
    font-size: 1.26rem;
    font-weight: 740;
    letter-spacing: -0.01em;
    color: #e6edf8;
    box-shadow: 0 4px 10px rgba(6, 12, 24, 0.2);
    transition: all 0.18s ease;
  }

  .theme-toggle-btn--nav {
    margin-left: 0.6rem;
  }

  #theme-toggle.theme-toggle-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 7px 14px rgba(6, 12, 24, 0.32);
  }

  #theme-toggle .theme-toggle-btn__icon {
    width: 2rem;
    height: 2rem;
    border-radius: 50%;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 1.15rem;
    background: rgba(255, 255, 255, 0.08);
    border: 1px solid rgba(255, 255, 255, 0.2);
  }

  #theme-toggle[data-next-theme="dark"] {
    background: linear-gradient(180deg, #edf9ef 0%, #e3f4e7 100%);
    color: #2d8a3a;
    box-shadow: 0 4px 10px rgba(37, 121, 56, 0.14);
  }

  #theme-toggle[data-next-theme="dark"] .theme-toggle-btn__icon {
    color: #2d8a3a;
    background: rgba(45, 138, 58, 0.12);
    border-color: rgba(45, 138, 58, 0.3);
  }

  #theme-toggle[data-next-theme="light"] {
    background: linear-gradient(180deg, #2d3244 0%, #252a3a 100%);
    color: #f2f5ff;
  }

  #theme-toggle[data-next-theme="light"] .theme-toggle-btn__icon {
    color: #f0f5ff;
    background: rgba(255, 255, 255, 0.08);
    border-color: rgba(255, 255, 255, 0.24);
  }

  @media (max-width: 640px) {
    .header__guest-login p,
    .header__guest-signup p {
      font-size: 1.32rem !important;
    }

    #theme-toggle.theme-toggle-btn {
      min-height: 3rem;
      padding: 0.3rem 0.9rem 0.3rem 0.7rem;
      gap: 0.55rem;
      font-size: 1.14rem;
    }

    #theme-toggle .theme-toggle-btn__icon {
      width: 1.7rem;
      height: 1.7rem;
      font-size: 1rem;
    }

    .header.header--loggedIn .container {
      gap: 0.55rem;
    }

    .header.header--loggedIn .room__top:nth-of-type(2) {
      justify-content: flex-start;
    }

    .header__search--compact {
      gap: 0.5rem;
      margin: 0;
    }
  }

  .quick-link-wrap {
    position: relative;
    margin-left: 0.28rem;
    display: inline-flex;
    align-items: center;
  }

  .quick-link-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 3.28rem;
    height: 3.28rem;
    border-radius: 10px;
    border: 1px solid rgba(150, 170, 200, 0.46);
    background: linear-gradient(180deg, rgba(35, 45, 66, 0.78), rgba(24, 31, 47, 0.72));
    color: #d9e6fb;
    line-height: 1;
    cursor: pointer;
    transition: all 0.16s ease;
    padding: 0;
  }

  .quick-link-btn:hover {
    background: linear-gradient(180deg, rgba(45, 59, 87, 0.88), rgba(31, 40, 60, 0.84));
    border-color: rgba(173, 198, 238, 0.74);
    transform: translateY(-1px);
    box-shadow: 0 8px 14px rgba(6, 11, 21, 0.28);
  }

  .quick-link-btn:focus-visible {
    outline: 2px solid rgba(134, 194, 255, 0.92);
    outline-offset: 2px;
  }

  .quick-link-btn[aria-expanded="true"] {
    background: linear-gradient(180deg, rgba(57, 74, 109, 0.94), rgba(34, 47, 73, 0.9));
    border-color: rgba(183, 211, 250, 0.86);
    box-shadow: 0 9px 16px rgba(6, 11, 21, 0.32);
  }

  .quick-link-btn svg {
    width: 1.8rem;
    height: 1.8rem;
    display: block;
  }

  .quick-link-btn svg line {
    stroke: currentColor;
    stroke-width: 1.9;
    stroke-linecap: round;
  }

  .quick-link-btn svg circle {
    fill: currentColor;
  }

  html[data-theme="light"] .quick-link-btn {
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.96), rgba(245, 250, 255, 0.92));
    color: #35577b;
    border-color: rgba(136, 160, 193, 0.68);
  }

  html[data-theme="light"] .quick-link-btn:hover {
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.99), rgba(238, 246, 255, 0.96));
    border-color: rgba(109, 141, 183, 0.82);
    box-shadow: 0 7px 14px rgba(42, 71, 109, 0.17);
  }

  html[data-theme="light"] .quick-link-btn[aria-expanded="true"] {
    background: linear-gradient(180deg, rgba(233, 244, 255, 0.98), rgba(222, 238, 255, 0.96));
    border-color: rgba(98, 133, 179, 0.9);
    box-shadow: 0 8px 14px rgba(42, 71, 109, 0.2);
  }

  @media (max-width: 640px) {
    .quick-link-wrap {
      margin-left: 0.2rem;
    }

    .quick-link-btn {
      width: 3rem;
      height: 3rem;
      border-radius: 9px;
    }

    .quick-link-btn svg {
      width: 1.62rem;
      height: 1.62rem;
    }
  }

  .quick-link-panel {
    display: none;
    position: absolute;
    top: calc(100% + 8px);
    left: 0;
    min-width: 30rem;
    max-width: min(40rem, calc(100vw - 3rem));
    max-height: min(76vh, 52rem);
    overflow: auto;
    border-radius: 12px;
    border: 1px solid rgba(127, 152, 191, 0.42);
    background: linear-gradient(165deg, rgba(15, 22, 36, 0.96), rgba(20, 30, 49, 0.96));
    box-shadow: 0 14px 30px rgba(4, 9, 17, 0.36);
    z-index: 10020;
    padding: 1rem 1.1rem 1rem;
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
  }

  @media (max-height: 900px) {
    .quick-link-panel {
      max-height: 80vh;
    }
  }

  @media (max-width: 640px) {
    .quick-link-panel {
      min-width: min(30rem, calc(100vw - 1.4rem));
      max-width: calc(100vw - 1.4rem);
      max-height: 82vh;
      padding: 0.9rem 0.9rem 0.88rem;
    }
  }

  .quick-link-panel.is-open {
    display: block;
  }

  .quick-link-title {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 0.7rem;
    font-size: 1.22rem;
    font-weight: 680;
    color: #9ed2fb;
    letter-spacing: 0.015em;
  }

  .quick-link-title__main {
    display: inline-flex;
    align-items: center;
    gap: 0.48rem;
    min-width: 0;
  }

  .quick-link-title__icon {
    width: 1.28rem;
    height: 1.28rem;
    color: #78bdf0;
    opacity: 0.95;
    flex: 0 0 auto;
  }

  .quick-link-title__text {
    display: inline-block;
    line-height: 1.1;
  }

  .quick-link-close {
    border: 1px solid rgba(121, 146, 185, 0.46);
    border-radius: 8px;
    font-size: 1.05rem;
    font-weight: 600;
    padding: 0.28rem 0.62rem;
    color: #dbe9fd;
    background: rgba(80, 101, 135, 0.5);
    cursor: pointer;
    transition: all 0.14s ease;
  }

  .quick-link-close:hover {
    border-color: rgba(148, 177, 222, 0.68);
    background: rgba(101, 127, 170, 0.5);
  }

  .quick-link-list {
    margin: 0;
    padding: 0;
    list-style: none;
    display: grid;
    gap: 0.36rem;
  }

  .quick-link-list a {
    padding: 0.58rem 0.52rem;
    font-size: 1.22rem;
    color: #d3e3f9;
    text-decoration: none;
    border-radius: 8px;
    border: 1px solid rgba(118, 145, 186, 0.12);
    background: rgba(72, 99, 142, 0.11);
    display: flex;
    align-items: center;
    justify-content: flex-start;
    gap: 0.7rem;
  }

  .quick-link-list a:hover {
    background: rgba(95, 132, 182, 0.2);
    border-color: rgba(132, 169, 217, 0.34);
  }

  .quick-link-list a:focus-visible,
  .quick-link-close:focus-visible {
    outline: 2px solid rgba(134, 194, 255, 0.92);
    outline-offset: 2px;
  }

  .quick-link-item__main {
    min-width: 0;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: 580;
  }

  .quick-link-item__label {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .quick-link-item__icon {
    width: 1.35rem;
    height: 1.35rem;
    color: currentColor;
    opacity: 0.95;
    flex: 0 0 auto;
  }

  .quick-link-section {
    margin: 0.45rem 0 0.2rem;
    padding: 0.1rem 0.2rem;
    font-size: 1.05rem;
    font-weight: 600;
    letter-spacing: 0.025em;
    color: #6f8fb3;
    text-transform: uppercase;
    opacity: 0.86;
  }

  .quick-link-list a.quick-link-local {
    color: #d8e9ff;
  }

  .quick-link-list a.quick-link-admin {
    color: #d8e9ff;
  }

  html[data-theme="light"] .quick-link-panel {
    border-color: rgba(143, 169, 204, 0.58);
    background: linear-gradient(165deg, rgba(252, 254, 255, 0.99), rgba(244, 249, 255, 0.98));
    box-shadow: 0 14px 26px rgba(38, 62, 97, 0.16);
  }

  html[data-theme="light"] .quick-link-title {
    color: #3c6e98;
  }

  html[data-theme="light"] .quick-link-title__icon {
    color: #5d95c5;
  }

  html[data-theme="light"] .quick-link-close {
    color: #fff;
    background: #728cb0;
    border-color: rgba(110, 141, 183, 0.56);
  }

  html[data-theme="light"] .quick-link-close:hover {
    background: #6885ab;
    border-color: rgba(95, 127, 172, 0.72);
  }

  html[data-theme="light"] .quick-link-list a {
    color: #274e73;
    background: rgba(150, 188, 231, 0.14);
    border-color: rgba(130, 160, 197, 0.2);
  }

  html[data-theme="light"] .quick-link-list a.quick-link-local {
    color: #274e73;
  }

  html[data-theme="light"] .quick-link-list a.quick-link-admin {
    color: #274e73;
  }

  html[data-theme="light"] .quick-link-list a:hover {
    background: rgba(111, 149, 196, 0.2);
    border-color: rgba(116, 151, 194, 0.38);
  }

  html[data-theme="light"] .quick-link-section {
    color: #7591b0;
    opacity: 0.84;
  }
</style>
<header class="header header--loggedIn" style="padding-top: 0.35rem; padding-bottom: 0.05rem; border-radius: 7px;">

  <div class="container">

    <div class="room__top" style="border-radius: 7px;">

      <a href="{% url 'home' %}" class="header__logo thethe9-navbar-logo" style="position:relative; display:block; overflow:hidden; flex:0 0 auto;">
        <img class="thethe9-navbar-logo__img thethe9-navbar-logo__img--dark" src="{% static 'images/thethe9-navbar-logo.svg' %}" alt="thethe9.com" style="position:absolute; inset:0; width:100%; height:100%; object-fit:contain; display:block;" />
        <img class="thethe9-navbar-logo__img thethe9-navbar-logo__img--light" src="{% static 'images/thethe9-navbar-logo-light.svg' %}" alt="thethe9.com" style="position:absolute; inset:0; width:100%; height:100%; object-fit:contain; display:block;" />
      </a>


      <div class="quick-link-wrap">
        <button type="button" id="quick-link-toggle" class="quick-link-btn tooltip" aria-label="Quick Links 메뉴" aria-haspopup="true" aria-expanded="false" aria-controls="quick-link-panel">
          <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <line x1="6.5" y1="7" x2="17.5" y2="7"></line>
            <line x1="6.5" y1="12" x2="17.5" y2="12"></line>
            <line x1="6.5" y1="17" x2="17.5" y2="17"></line>
            <circle cx="5" cy="7" r="1.25"></circle>
            <circle cx="19" cy="12" r="1.25"></circle>
            <circle cx="5" cy="17" r="1.25"></circle>
          </svg>

        </button>
        <div id="quick-link-panel" class="quick-link-panel" role="menu" aria-label="Quick Links">
          <div class="quick-link-title">
            <span class="quick-link-title__main">
              <svg class="quick-link-title__icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M12 3v11m0 0a3.5 3.5 0 1 1-3.5 3.5M12 14a3.5 3.5 0 1 0 3.5 3.5M7 7h10" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <span class="quick-link-title__text">Quick Links</span>
            </span>
            <button type="button" id="quick-link-close" class="quick-link-close">닫기</button>
          </div>
          <ul class="quick-link-list">
            <li class="quick-link-section">KRA</li>
            <li>
              <a href="https://race.kra.co.kr/thisweekrace/ThisWeekChulmapyoChange.do" onclick="window.open(this.href, 'w_kra', 'width=1400, height=1000, toolbars=no, scrollbars=yes'); return false;">
                <span class="quick-link-item__main">
                  <svg class="quick-link-item__icon" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 3v12m0 0-4-4m4 4 4-4M5 17v2h14v-2" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg>
                  <span class="quick-link-item__label">KRA 출전표 변경</span>
                </span>
              </a>
            </li>
            <li>
              <a href="https://race.kra.co.kr/thisweekrace/ThisWeekWeight.do" onclick="window.open(this.href, 'w_kra', 'width=1400, height=1000, toolbars=no, scrollbars=yes'); return false;">
                <span class="quick-link-item__main">
                  <svg class="quick-link-item__icon" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M4 8h16M6 8V6a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v2m-9 4h6m-4 4h2M5 8l1 11a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2l1-11" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg>
                  <span class="quick-link-item__label">KRA 출주마 체중</span>
                </span>
              </a>
            </li>
            <li>
              <a href="https://race.kra.co.kr/thisweekrace/ThisWeekScoretableDailyScoretable.do" onclick="window.open(this.href, 'w_kra', 'width=1400, height=1000, toolbars=no, scrollbars=yes'); return false;">
                <span class="quick-link-item__main">
                  <svg class="quick-link-item__icon" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M4 6h16M4 12h16M4 18h10M15 16l2 2 3-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg>
                  <span class="quick-link-item__label">KRA 요약성적표</span>
                </span>
              </a>
            </li>

            <li class="quick-link-section">Service</li>
            <li>
              <a href="{% url 'print_prediction' %}" onclick="window.open(this.href, '_blank', 'width=1000, height=1200, toolbars=no, scrollbars=yes'); return false;">
                <span class="quick-link-item__main">
                  <svg class="quick-link-item__icon" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M7 9V4h10v5M7 17H5a2 2 0 0 1-2-2v-3a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v3a2 2 0 0 1-2 2h-2M7 14h10v6H7v-6Z" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg>
                  <span class="quick-link-item__label">프로그램 예상순위 출력</span>
                </span>
              </a>
            </li>
            <li>
              <a class="quick-link-local" href="{% url 'award_status_jockey' %}" onclick="window.open(this.href, '_blank', 'width=900, height=1000, toolbars=no, scrollbars=yes'); return false;">
                <span class="quick-link-item__main">
                  <svg class="quick-link-item__icon" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M7 19h10M8 16l2-5 3 2 1-3 2 6M6 8a6 6 0 1 1 12 0" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg>
                  <span class="quick-link-item__label">기수 출주현황</span>
                </span>
              </a>
            </li>
            <li>
              <a class="quick-link-local" href="{% url 'award_status_trainer' %}" onclick="window.open(this.href, '_blank', 'width=900, height=1000, toolbars=no, scrollbars=yes'); return false;">
                <span class="quick-link-item__main">
                  <svg class="quick-link-item__icon" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M4 20h16M6 20v-8l6-4 6 4v8M9 20v-4h6v4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg>
                  <span class="quick-link-item__label">마방 출주현황</span>
                </span>
              </a>
            </li>
            {% if request.user.username == 'admin' %}
            <li class="quick-link-section">Admin</li>
            <li>
              <a class="quick-link-admin" href="{% url 'data_management' %}" onclick="window.open(this.href, 'w_input', 'width=1300, height=800, toolbars=no, scrollbars=yes'); return false;">
                <span class="quick-link-item__main">
                  <svg class="quick-link-item__icon" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M4 7h16M7 4v6m10-6v6M5 10h14v9a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1v-9Z" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg>
                  <span class="quick-link-item__label">KRA 자료실 데이터 입력</span>
                </span>
              </a>
            </li>
            <li>
              <a class="quick-link-admin" href="{% url 'race_breakingnews' %}" onclick="window.open(this.href, 'w_news', 'width=900, height=700, toolbars=no, scrollbars=yes'); return false;">
                <span class="quick-link-item__main">
                  <svg class="quick-link-item__icon" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M6 17v-8a2 2 0 0 1 2-2h9l3 2v8a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2Zm3-6h6m-6 3h6" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg>
                  <span class="quick-link-item__label">경주속보 입력</span>
                </span>
              </a>
            </li>
            <li>
              <a class="quick-link-admin" href="{% url 'race_calculation' %}" onclick="window.open(this.href, 'w_calculation', 'width=1300, height=800, toolbars=no, scrollbars=yes'); return false;">
                <span class="quick-link-item__main">
                  <svg class="quick-link-item__icon" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M5 19V9m7 10V5m7 14v-6M3 19h18" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg>
                  <span class="quick-link-item__label">경주 집계</span>
                </span>
              </a>
            </li>
            {% endif %}
          </ul>
        </div>
      </div>
    </div>

    <div class="room__top" style="border-radius: 7px;">
    <form class="header__search header__search--compact"
      method="GET"
      action="{% url 'home' %}">
    
      <span class="tooltip header-search-toggle">
        
        <label class="header-search-toggle__label">
          <input class="header-search-toggle__radio" type="radio" name="view_type" value="1" {% if view_type == "1" %}checked{% endif %}>
          v1
        </label>
        <label class="header-search-toggle__label">
          <input class="header-search-toggle__radio" type="radio" name="view_type" value="2" {% if view_type == "2" or not view_type %}checked{% endif %}>
          v2
        </label>
        <span class="tooltip-text">
          v1: 기존 예상순위 기준<br>
          v2: 최근 폼(Form) + 트렌드(Trend) 반영
        </span>
      </span>
      <input class="header-search-date" type="date" value="{{ fdate }}" name="q" style="width:14rem;">
      <!-- 관심기수 :&nbsp;&nbsp;&nbsp;
      <input style="width: 15rem; color:var(--color-r1)" type="text" value='{{jname1}}' placeholder="세영" name="j1">
      &nbsp;&nbsp;&nbsp; -->
      
      <button class="btn btn--main header-search-submit">검색</button>
    
    </form>

    </div>


    <nav class="header__menu">

      <!-- Logged In -->
      {% if request.user.is_authenticated %}
      <div class="header__user">
        <a href="{% url 'update-user' %}">
          <div class="avatar avatar--medium active">
            <img src="{{ request.user.avatar.url }}" />
          </div>
          <p>{% if request.user.name %}{{request.user.name}}{% else %} 필명{%endif%}
            <span style="font-size: 1.0rem;">@{{request.user.username}}
            </span>
          </p>
        </a>
        <button class="dropdown-button">
          <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">
            <title>chevron-down</title>
            <path d="M16 21l-13-13h-3l16 16 16-16h-3l-13 13z"></path>
          </svg>
        </button>
      </div>
      <button id="theme-toggle" class="theme-toggle-btn theme-toggle-btn--nav" type="button" aria-label="테마 전환" data-next-theme="light">
        <span class="theme-toggle-btn__icon" aria-hidden="true">☀</span>
        <span class="theme-toggle-btn__text">일반모드</span>
      </button>
      {% else %}

      <!-- Not Logged In -->
      <div class="header__guest">
        <a href="{% url 'account_login' %}" class="header__guest-login">
          <img src="{% static 'images/avatar.svg' %}" />
          <p>Login</p>
        </a>
        <a href="{% url 'account_signup' %}" class="header__guest-signup js-signup-disabled" aria-disabled="true" title="신규 회원가입 오픈 예정"><p>회원가입</p></a>
        <button id="theme-toggle" class="theme-toggle-btn theme-toggle-btn--nav" type="button" aria-label="테마 전환" data-next-theme="light">
          <span class="theme-toggle-btn__icon" aria-hidden="true">☀</span>
          <span class="theme-toggle-btn__text">일반모드</span>
        </button>
      </div>
      {% endif %}

      <div class="dropdown-menu">
        <a href="{% url 'update-user' %}" class="dropdown-link"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32"
            height="32" viewBox="0 0 32 32">
            <title>tools</title>
            <path
              d="M27.465 32c-1.211 0-2.35-0.471-3.207-1.328l-9.392-9.391c-2.369 0.898-4.898 0.951-7.355 0.15-3.274-1.074-5.869-3.67-6.943-6.942-0.879-2.682-0.734-5.45 0.419-8.004 0.135-0.299 0.408-0.512 0.731-0.572 0.32-0.051 0.654 0.045 0.887 0.277l5.394 5.395 3.586-3.586-5.394-5.395c-0.232-0.232-0.336-0.564-0.276-0.887s0.272-0.596 0.572-0.732c2.552-1.152 5.318-1.295 8.001-0.418 3.274 1.074 5.869 3.67 6.943 6.942 0.806 2.457 0.752 4.987-0.15 7.358l9.392 9.391c0.844 0.842 1.328 2.012 1.328 3.207-0 2.5-2.034 4.535-4.535 4.535zM15.101 19.102c0.26 0 0.516 0.102 0.707 0.293l9.864 9.863c0.479 0.479 1.116 0.742 1.793 0.742 1.398 0 2.535-1.137 2.535-2.535 0-0.668-0.27-1.322-0.742-1.793l-9.864-9.863c-0.294-0.295-0.376-0.74-0.204-1.119 0.943-2.090 1.061-4.357 0.341-6.555-0.863-2.631-3.034-4.801-5.665-5.666-1.713-0.561-3.468-0.609-5.145-0.164l4.986 4.988c0.391 0.391 0.391 1.023 0 1.414l-5 5c-0.188 0.188-0.441 0.293-0.707 0.293s-0.52-0.105-0.707-0.293l-4.987-4.988c-0.45 1.682-0.397 3.436 0.164 5.146 0.863 2.631 3.034 4.801 5.665 5.666 2.2 0.721 4.466 0.604 6.555-0.342 0.132-0.059 0.271-0.088 0.411-0.088z">
            </path>
          </svg>
          Settings</a>
        <a href="{% url 'password_change' %}" class="dropdown-link"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32"
            height="32" viewBox="0 0 32 32">
            <title>lock</title>
            <path
              d="M27 12h-1v-2c0-5.514-4.486-10-10-10s-10 4.486-10 10v2h-1c-0.553 0-1 0.447-1 1v18c0 0.553 0.447 1 1 1h22c0.553 0 1-0.447 1-1v-18c0-0.553-0.447-1-1-1zM8 10c0-4.411 3.589-8 8-8s8 3.589 8 8v2h-16v-2zM26 30h-20v-16h20v16z">
            </path>
            <path
              d="M15 21.694v4.306h2v-4.306c0.587-0.348 1-0.961 1-1.694 0-1.105-0.895-2-2-2s-2 0.895-2 2c0 0.732 0.413 1.345 1 1.694z">
            </path>
          </svg>
          Password</a>
        <a href="{% url 'account_logout' %}" class="dropdown-link"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32"
            height="32" viewBox="0 0 32 32">
            <title>sign-out</title>
            <path
              d="M3 0h22c0.553 0 1 0 1 0.553l-0 3.447h-2v-2h-20v28h20v-2h2l0 3.447c0 0.553-0.447 0.553-1 0.553h-22c-0.553 0-1-0.447-1-1v-30c0-0.553 0.447-1 1-1z">
            </path>
            <path
              d="M21.879 21.293l1.414 1.414 6.707-6.707-6.707-6.707-1.414 1.414 4.293 4.293h-14.172v2h14.172l-4.293 4.293z">
            </path>
          </svg>
          Logout</a>
      </div>
    </nav>

  </div>

</header>





<!-- {% if request.user.is_authenticated %}
<p>Hello {{request.user}}</p>
<a href="{% url 'account_logout' %}">Logout</a>
{% else %}

<a href="{% url 'account_login' %}">Login</a>
{% endif %} -->
<script>
  (function () {
    var toggle = document.getElementById('quick-link-toggle');
    var panel = document.getElementById('quick-link-panel');
    var closeBtn = document.getElementById('quick-link-close');
    if (!toggle || !panel) return;

    function closePanel() {
      panel.classList.remove('is-open');
      toggle.setAttribute('aria-expanded', 'false');
    }

    function openPanel() {
      panel.classList.add('is-open');
      toggle.setAttribute('aria-expanded', 'true');
    }

    toggle.addEventListener('click', function (event) {
      event.stopPropagation();
      if (panel.classList.contains('is-open')) {
        closePanel();
      } else {
        openPanel();
      }
    });

    if (closeBtn) {
      closeBtn.addEventListener('click', function (event) {
        event.stopPropagation();
        closePanel();
      });
    }

    document.addEventListener('click', function (event) {
      if (!panel.classList.contains('is-open')) return;
      if (panel.contains(event.target) || toggle.contains(event.target)) return;
      closePanel();
    });
  })();

  (function () {
    var signupLink = document.querySelector(".js-signup-disabled");
    if (!signupLink) return;

    signupLink.addEventListener("click", function (event) {
      event.preventDefault();
      window.alert(
        "현재 신규 회원가입은 서비스 안정화를 위해 잠시 제한하고 있습니다.\n이용에 불편을 드려 죄송하며, 빠른 시일 내 오픈하겠습니다."
      );
    });
  })();
</script>
