{% load static %}
<style>
  .header.header--loggedIn {
    border: none !important;
    box-shadow: none !important;
    background: linear-gradient(180deg, #353a4c 0%, #31364a 100%) !important;
  }

  html[data-theme="light"] .header.header--loggedIn {
    background: linear-gradient(180deg, #f7f9fd 0%, #eef3fa 100%) !important;
  }

  .header.header--loggedIn .room__top {
    background: transparent !important;
  }

  .header__menu,
  .header__guest-login p,
  .header__guest-signup p,
  #theme-toggle.theme-toggle-btn,
  #theme-toggle .theme-toggle-btn__text {
    font-family: "Pretendard Variable", "Pretendard", "Noto Sans KR", "Apple SD Gothic Neo", "Malgun Gothic", "Segoe UI", sans-serif !important;
    letter-spacing: -0.01em;
  }

  .header__guest-login p {
    font-size: 1.5rem !important;
    font-weight: 650 !important;
    color: #c6d4e9 !important;
  }

  .header__guest-signup p {
    font-size: 1.5rem !important;
    font-weight: 680 !important;
    color: #9eb8d7 !important;
  }

  html[data-theme="light"] .header__guest-signup p {
    color: #2f5f89 !important;
  }

  .thethe9-navbar-logo {
    width: 22.4rem !important;
    height: 4rem !important;
    display: flex;
    align-items: center;
    gap: 0 !important;
    flex: 0 0 auto;
    position: relative;
    overflow: hidden;
  }

  .header__logo.thethe9-navbar-logo > .thethe9-navbar-logo__img {
    width: 100% !important;
    height: 100% !important;
    max-width: none !important;
    object-fit: contain;
    display: block;
    position: absolute;
    inset: 0;
  }

  .thethe9-navbar-logo__img--light {
    display: none !important;
  }

  html[data-theme="light"] .thethe9-navbar-logo__img--dark {
    display: none !important;
  }

  html[data-theme="light"] .thethe9-navbar-logo__img--light {
    display: block !important;
  }

  @media (max-width: 980px) {
    .thethe9-navbar-logo {
      width: 18rem !important;
      height: 3.3rem !important;
    }
  }

  @media (max-width: 640px) {
    .thethe9-navbar-logo {
      width: 14.8rem !important;
      height: 2.8rem !important;
    }
  }

  #theme-toggle.theme-toggle-btn {
    min-height: 3.4rem;
    padding: 0.4rem 1.2rem 0.4rem 0.8rem;
    border-radius: 999px;
    border: none;
    background: linear-gradient(180deg, color-mix(in srgb, var(--color-dark) 94%, #fff 6%) 0%, color-mix(in srgb, var(--color-bg) 88%, #fff 12%) 100%);
    display: inline-flex;
    align-items: center;
    gap: 0.7rem;
    font-size: 1.26rem;
    font-weight: 740;
    letter-spacing: -0.01em;
    color: #e6edf8;
    box-shadow: 0 4px 10px rgba(6, 12, 24, 0.2);
    transition: all 0.18s ease;
  }

  .theme-toggle-btn--nav {
    margin-left: 0.6rem;
  }

  #theme-toggle.theme-toggle-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 7px 14px rgba(6, 12, 24, 0.32);
  }

  #theme-toggle .theme-toggle-btn__icon {
    width: 2rem;
    height: 2rem;
    border-radius: 50%;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 1.15rem;
    background: rgba(255, 255, 255, 0.08);
    border: 1px solid rgba(255, 255, 255, 0.2);
  }

  #theme-toggle[data-next-theme="dark"] {
    background: linear-gradient(180deg, #edf9ef 0%, #e3f4e7 100%);
    color: #2d8a3a;
    box-shadow: 0 4px 10px rgba(37, 121, 56, 0.14);
  }

  #theme-toggle[data-next-theme="dark"] .theme-toggle-btn__icon {
    color: #2d8a3a;
    background: rgba(45, 138, 58, 0.12);
    border-color: rgba(45, 138, 58, 0.3);
  }

  #theme-toggle[data-next-theme="light"] {
    background: linear-gradient(180deg, #2d3244 0%, #252a3a 100%);
    color: #f2f5ff;
  }

  #theme-toggle[data-next-theme="light"] .theme-toggle-btn__icon {
    color: #f0f5ff;
    background: rgba(255, 255, 255, 0.08);
    border-color: rgba(255, 255, 255, 0.24);
  }

  @media (max-width: 640px) {
    .header__guest-login p,
    .header__guest-signup p {
      font-size: 1.32rem !important;
    }

    #theme-toggle.theme-toggle-btn {
      min-height: 3rem;
      padding: 0.3rem 0.9rem 0.3rem 0.7rem;
      gap: 0.55rem;
      font-size: 1.14rem;
    }

    #theme-toggle .theme-toggle-btn__icon {
      width: 1.7rem;
      height: 1.7rem;
      font-size: 1rem;
    }
  }
</style>
<header class="header header--loggedIn" style="padding-top: 0.35rem; padding-bottom: 0.05rem; border-radius: 7px;">

  <div class="container">

    <div class="room__top" style="border-radius: 7px;">

      <a href="{% url 'home' %}" class="header__logo thethe9-navbar-logo" style="position:relative; display:block; width:22.4rem; height:4rem; overflow:hidden; flex:0 0 auto;">
        <img class="thethe9-navbar-logo__img thethe9-navbar-logo__img--dark" src="{% static 'images/thethe9-navbar-logo.svg' %}" alt="thethe9.com" style="position:absolute; inset:0; width:100%; height:100%; object-fit:contain; display:block;" />
        <img class="thethe9-navbar-logo__img thethe9-navbar-logo__img--light" src="{% static 'images/thethe9-navbar-logo-light.svg' %}" alt="thethe9.com" style="position:absolute; inset:0; width:100%; height:100%; object-fit:contain; display:block;" />
      </a>


      <a href="{% url 'print_prediction' %}" onclick="window.open(this.href, '_blank', 'width=1000, height=1200, toolbars=no, scrollbars=yes'); return false;">
        <span class="tooltip">ğŸ–¨ï¸
          <span class="tooltip-text" style="z-index: 9; width: 16.0rem; font-size: 1.3rem;">
            ğŸ–¨ï¸&nbsp;&nbsp;í”„ë¡œê·¸ë¨ ì˜ˆìƒìˆœìœ„ ì¶œë ¥
          </span>
        </span>
      </a>
    </div>

    <div class="room__top" style="border-radius: 7px;">
    <form class="header__search header__search--compact"
      method="GET"
      action="{% url 'home' %}">
    
      <span class="tooltip header-search-toggle">
        
        <label class="header-search-toggle__label">
          <input class="header-search-toggle__radio" type="radio" name="view_type" value="1" {% if view_type == "1" %}checked{% endif %}>
          v1
        </label>
        <label class="header-search-toggle__label">
          <input class="header-search-toggle__radio" type="radio" name="view_type" value="2" {% if view_type == "2" or not view_type %}checked{% endif %}>
          v2
        </label>
        <span class="tooltip-text">
          v1: ê¸°ì¡´ ì˜ˆìƒìˆœìœ„ ê¸°ì¤€<br>
          v2: ìµœê·¼ í¼(Form) + íŠ¸ë Œë“œ(Trend) ë°˜ì˜
        </span>
      </span>
      <input class="header-search-date" type="date" value={{fdate}} name="q" style="width:14rem;">
      <!-- ê´€ì‹¬ê¸°ìˆ˜ :&nbsp;&nbsp;&nbsp;
      <input style="width: 15rem; color:var(--color-r1)" type="text" value='{{jname1}}' placeholder="ì„¸ì˜" name="j1">
      &nbsp;&nbsp;&nbsp; -->
      
      <button class="btn btn--main header-search-submit">ê²€ìƒ‰</button>
    
    </form>

    </div>


    <nav class="header__menu">

      <!-- Logged In -->
      {% if request.user.is_authenticated %}
      <div class="header__user">
        <a href="{% url 'update-user' %}">
          <div class="avatar avatar--medium active">
            <img src="{{ request.user.avatar.url }}" />
          </div>
          <p>{% if request.user.name %}{{request.user.name}}{% else %} í•„ëª…{%endif%}
            <span style="font-size: 1.0rem;">@{{request.user.username}}
            </span>
          </p>
        </a>
        <button class="dropdown-button">
          <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">
            <title>chevron-down</title>
            <path d="M16 21l-13-13h-3l16 16 16-16h-3l-13 13z"></path>
          </svg>
        </button>
      </div>
      <button id="theme-toggle" class="theme-toggle-btn theme-toggle-btn--nav" type="button" aria-label="í…Œë§ˆ ì „í™˜" data-next-theme="light">
        <span class="theme-toggle-btn__icon" aria-hidden="true">â˜€</span>
        <span class="theme-toggle-btn__text">ì¼ë°˜ëª¨ë“œ</span>
      </button>
      {% else %}

      <!-- Not Logged In -->
      <div class="header__guest">
        <a href="{% url 'account_login' %}" class="header__guest-login">
          <img src="{% static 'images/avatar.svg' %}" />
          <p>Login</p>
        </a>
        <a href="{% url 'account_signup' %}" class="header__guest-signup"><p>íšŒì›ê°€ì…</p></a>
        <button id="theme-toggle" class="theme-toggle-btn theme-toggle-btn--nav" type="button" aria-label="í…Œë§ˆ ì „í™˜" data-next-theme="light">
          <span class="theme-toggle-btn__icon" aria-hidden="true">â˜€</span>
          <span class="theme-toggle-btn__text">ì¼ë°˜ëª¨ë“œ</span>
        </button>
      </div>
      {% endif %}

      <div class="dropdown-menu">
        <a href="{% url 'update-user' %}" class="dropdown-link"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32"
            height="32" viewBox="0 0 32 32">
            <title>tools</title>
            <path
              d="M27.465 32c-1.211 0-2.35-0.471-3.207-1.328l-9.392-9.391c-2.369 0.898-4.898 0.951-7.355 0.15-3.274-1.074-5.869-3.67-6.943-6.942-0.879-2.682-0.734-5.45 0.419-8.004 0.135-0.299 0.408-0.512 0.731-0.572 0.32-0.051 0.654 0.045 0.887 0.277l5.394 5.395 3.586-3.586-5.394-5.395c-0.232-0.232-0.336-0.564-0.276-0.887s0.272-0.596 0.572-0.732c2.552-1.152 5.318-1.295 8.001-0.418 3.274 1.074 5.869 3.67 6.943 6.942 0.806 2.457 0.752 4.987-0.15 7.358l9.392 9.391c0.844 0.842 1.328 2.012 1.328 3.207-0 2.5-2.034 4.535-4.535 4.535zM15.101 19.102c0.26 0 0.516 0.102 0.707 0.293l9.864 9.863c0.479 0.479 1.116 0.742 1.793 0.742 1.398 0 2.535-1.137 2.535-2.535 0-0.668-0.27-1.322-0.742-1.793l-9.864-9.863c-0.294-0.295-0.376-0.74-0.204-1.119 0.943-2.090 1.061-4.357 0.341-6.555-0.863-2.631-3.034-4.801-5.665-5.666-1.713-0.561-3.468-0.609-5.145-0.164l4.986 4.988c0.391 0.391 0.391 1.023 0 1.414l-5 5c-0.188 0.188-0.441 0.293-0.707 0.293s-0.52-0.105-0.707-0.293l-4.987-4.988c-0.45 1.682-0.397 3.436 0.164 5.146 0.863 2.631 3.034 4.801 5.665 5.666 2.2 0.721 4.466 0.604 6.555-0.342 0.132-0.059 0.271-0.088 0.411-0.088z">
            </path>
          </svg>
          Settings</a>
        <a href="{% url 'password_change' %}" class="dropdown-link"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32"
            height="32" viewBox="0 0 32 32">
            <title>lock</title>
            <path
              d="M27 12h-1v-2c0-5.514-4.486-10-10-10s-10 4.486-10 10v2h-1c-0.553 0-1 0.447-1 1v18c0 0.553 0.447 1 1 1h22c0.553 0 1-0.447 1-1v-18c0-0.553-0.447-1-1-1zM8 10c0-4.411 3.589-8 8-8s8 3.589 8 8v2h-16v-2zM26 30h-20v-16h20v16z">
            </path>
            <path
              d="M15 21.694v4.306h2v-4.306c0.587-0.348 1-0.961 1-1.694 0-1.105-0.895-2-2-2s-2 0.895-2 2c0 0.732 0.413 1.345 1 1.694z">
            </path>
          </svg>
          Password</a>
        <a href="{% url 'account_logout' %}" class="dropdown-link"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32"
            height="32" viewBox="0 0 32 32">
            <title>sign-out</title>
            <path
              d="M3 0h22c0.553 0 1 0 1 0.553l-0 3.447h-2v-2h-20v28h20v-2h2l0 3.447c0 0.553-0.447 0.553-1 0.553h-22c-0.553 0-1-0.447-1-1v-30c0-0.553 0.447-1 1-1z">
            </path>
            <path
              d="M21.879 21.293l1.414 1.414 6.707-6.707-6.707-6.707-1.414 1.414 4.293 4.293h-14.172v2h14.172l-4.293 4.293z">
            </path>
          </svg>
          Logout</a>
      </div>
    </nav>

  </div>

</header>





<!-- {% if request.user.is_authenticated %}
<p>Hello {{request.user}}</p>
<a href="{% url 'account_logout' %}">Logout</a>
{% else %}

<a href="{% url 'account_login' %}">Login</a>
{% endif %} -->
